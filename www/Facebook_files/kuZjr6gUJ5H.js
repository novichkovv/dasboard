/*!CK:2122161482!*//*1460387516,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["D9ppU"]); }

__d("MAdsUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return j===Object(j);}function i(j,k){var l=j;if(Array.isArray(j)){l=j.map(i);}else if(h(j)){l={};Object.keys(j).forEach(function(m){if(m!==k)l[m]=i(j[m],k);});}return l;}f.exports={clone:i,isObject:h};},null);
__d("ChannelDefaults",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={LONGPOLL_TIMEOUT:60000,STALL_THRESHOLD:180000,MIN_RETRY_INTERVAL:5000,MAX_RETRY_INTERVAL:30000};},null);
__d('ChannelStateMap',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={pull:{ok:'pull!',error:'pull',error_missing:'pull',error_msg_type:'pull',clock_anomaly:'pull!',visible:'pull!',hidden:'idle!',refresh_0:'reconnect',refresh_110:'reconnect!',refresh_111:'reconnect',refresh_112:'pull',refresh_113:'pull',refresh_117:'reconnect'},reconnect:{ok:'pull!',error:'reconnect',clock_anomaly:'reconnect!',visible:'pull!',hidden:'idle!'},idle:{ok:'idle!',clock_anomaly:'idle!',visible:'pull!',hidden:'idle!'},shutdown:{clock_anomaly:'shutdown!',visible:'shutdown!',hidden:'shutdown!'}};},null);
__d('RTISession',['getCrossOriginTransport','URI','XHRRequest','invariant','ErrorUtils','PHPQuerySerializer'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n='.facebook.com';function o(p,q,r,s,t,u,v,w,x){!p?k(0):void 0;!s?k(0):void 0;!t?k(0):void 0;this.domain=p;this.port=q;this.edgePoolName=r;this.stickyToken=s;this.loggedInId=t;this.accountId=u;this.clientProfile=v||'desktop';this.clientId=w;this.capabilities=x;}o.prototype.issueRequest=function(p,q,r,s,t){!p?k(0):void 0;!q?k(0):void 0;!s?k(0):void 0;var u=this.domain.length-n.length,v=u>0&&this.domain.indexOf(n,u)!==-1,w=v?this.domain:this.domain+n,x=(1048576*Math.random()|0).toString(36),y={cb:x,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var z in y)!!q[z]?k(0):void 0;Object.assign(y,q);var aa=new i(p).setDomain(w).setPort(this.port).setSecure(new i(window.location.href).isSecure()).setQueryData(y),ba=r?'POST':'GET',ca={};new j(aa).setTransportBuilder(h.withCredentials).setTimeout(t?t*1000:30000).setMethod(ba).setDataSerializer(function(da){return m.serialize(JSON.stringify(da));}).setData(r).setRequestHeader('Content-Type','application/x-www-form-urlencoded').setResponseHandler(function(da){var ea=da.substring('for (;;);'.length);ca.data=JSON.parse(ea);ca.error=null;l.applyWithGuard(s,this,[ca]);}.bind(this)).setErrorHandler(function(da){ca.data=null;ca.error=da.errorMsg||'error';l.applyWithGuard(s,this,[ca]);}.bind(this)).send();};f.exports=o;},null);
__d('StateMachine',['setTimeoutAcrossTransitions','EventEmitter','ex'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=0;function n(q,r){'use strict';this.idx=m++;this.machine=q;this.asap=r&&r.substr(-1)=='!';this.name=this.asap?r.substr(0,r.length-1):r;this.progress=p.NEW;this.status=null;}n.prototype.enter=function(){'use strict';this.machine.enter_private(this);};n.prototype.exit=function(q){'use strict';this.machine.exit_private(this,q);};n.prototype.toString=function(){'use strict';return this.name+'('+this.progress+','+this.status+')';};var o='_ABORT_';k=babelHelpers.inherits(p,i);l=k&&k.prototype;function p(q,r){'use strict';l.constructor.call(this);this.$StateMachine1=q;this.$StateMachine2=r;this.$StateMachine3=0;this.$StateMachine4=[];this.$StateMachine5=Date.now();}p.prototype.$StateMachine6=function(q){'use strict';this.$StateMachine4.push(Date.now()-this.$StateMachine5+': '+q);if(this.$StateMachine4.length>40)this.$StateMachine4=this.$StateMachine4.splice(-20);};p.prototype.getState=function(){'use strict';return this.$StateMachine7;};p.prototype.setDelay=function(q){'use strict';this.$StateMachine3=q||0;return this;};p.prototype.getDelay=function(){'use strict';return this.$StateMachine3;};p.prototype.enter=function(q){'use strict';this.enter_private(new n(this,q));};p.prototype.enter_private=function(q){'use strict';this.$StateMachine6('enter '+q+', '+this.$StateMachine7);if(this.$StateMachine7&&this.$StateMachine7!=q)this.$StateMachine7.exit(o);this.$StateMachine7=q;if(q.asap){delete q.asap;if(this.$StateMachine2.enter)this.$StateMachine2.enter(q);q.progress=p.ENTERED;}else{q.progress=p.PENDING;q.asap=true;q.$StateMachine8=h(function(){q.enter();},this.$StateMachine3);}this.emit(p.ENTER,q);};p.prototype.exit=function(q){'use strict';this.exit_private(this.$StateMachine7,q);};p.prototype.exit_private=function(q,r){'use strict';this.$StateMachine6('exit '+q+', '+r+', '+this.$StateMachine7);if(!q||q!=this.$StateMachine7)throw new Error(j('Invalid state: %s, history: %s',q,this.$StateMachine4.join('|')));if(q.progress==p.EXITED)return;q.status=r;q.progress=p.EXITED;if(q.$StateMachine8){clearInterval(q.$StateMachine8);q.$StateMachine8=null;}this.$StateMachine7=null;if(q&&this.$StateMachine2.exit)this.$StateMachine2.exit(q);q.exited=true;this.emit(p.EXIT,q);if(r!=o){var s=this.$StateMachine1[q.name];if(!s||!s[r])throw new Error(j('No exit for state:%s, status: %s',q.name,r));this.enter(s[r]);}};p.ENTER='enter';p.EXIT='exit';p.NEW='new';p.PENDING='pending';p.ENTERED='entered';p.EXITED='exited';f.exports=p;},null);
__d("rand32",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return Math.floor(Math.random()*4294967295);}f.exports=h;},null);
__d('MChannelManager',['Banzai','ChannelClientConfig','ChannelClientID','ChannelDefaults','ChannelEventEmitter','ChannelEventType','ChannelStateMap','Clock','LogHistory','MLogger','MRequest','MURI','RTISession','StateMachine','URI','Visibility','rand32','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa='ok',ba='error',ca='error_missing',da=60000,ea=null,fa=null,ga=null,ha=null,ia=null,ja=-1,ka=null,la=0,ma=j.getID(),na=false,oa={enter:function(ab){if(ha){ha.abort();ha=null;}switch(ab.name){case 'pull':if(!fa.uri)break;if(fa.disabled)break;var bb=new v(fa.uri),cb={channel:fa.user_channel,seq:ga,clientid:ma,profile:'mobile',partition:fa.partition,sticky_token:ja,msgs_recv:la,qp:'y',cb:x()};if(fa.chat_enabled)cb.state='active';if(ka)cb.sticky_pool=ka;if(fa.uid&&fa.viewerUid){cb.uid=fa.uid;cb.viewer_uid=fa.viewerUid;}ha=new r(bb+'').setCORS(true).setMethod('GET').setData(cb).setRaw(true);ha.listen('open',function(eb){eb.getTransport().withCredentials=true;});ha.listen('done',function(eb){ta(ab,eb);});ha.listen('error',function(){ta(ab);});break;case 'reconnect':var db=new s('/a/channel/reconnect.php');ha=new r(db+'').setMethod('GET');ha.listen('done',function(eb){ra(ab,eb);});ha.listen('error',function(eb){eb.isHandled=true;ra(ab);});break;default:}if(ha)ha.send();},exit:function(ab){if(ab.status==='ok'){if(ab.name==='pull')z.setDelay(0);}else if(!(ab.status==null)){var bb=z.getDelay();bb=bb>0?bb*2:ea.MIN_RETRY_INTERVAL;bb=Math.min(bb,ea.MAX_RETRY_INTERVAL);z.setDelay(bb);}if(ha){ha.abort();ha=null;}}};function pa(){var ab=null;if(na&&fa&&fa.host&&ja&&fa.uid)ab=new t(fa.host,null,ka,ja,fa.uid,fa.viewerUid,'mobile',ma,0);l.emit(m.RTI_SESSION,ab);}function qa(ab){ia=ab;}function ra(ab,bb){if(!bb){q.warn('_onReconnectError: reconnect request error');ab.exit(ba);}else if(bb.user_channel){fa=bb;ga=fa.seq;ab.exit(aa);}else{q.warn('_onReconnectError: bad reconnect response - %s',JSON.stringify(bb));ab.exit(ba);}}function sa(){na=true;pa();}function ta(ab,bb){var cb=aa;if(!bb){ab.exit(ba);return;}switch(bb.t){case 'refresh':case 'refreshDelay':cb='refresh_'+(bb.reason||0);break;case 'fullReload':cb=aa;if(bb.seq==0)sa();if('ms' in bb)ua(bb);break;case 'continue':break;case 'lb':var db=bb.lb_info;if(db){ja=db.sticky;var eb="http://";if(fa.is_secure_uri)eb="https://";if('pool' in db){ka=db.pool;}else{fa.uri=eb+db.vip+'.facebook.com/pull';fa.host=db.vip;}}else q.error('bad lb info from channel proxy');break;case 'msg':ua(bb);break;case 'batched':var fb=bb.batches,gb;for(gb=0;gb<fb.length;gb++)ta(ab,fb[gb]);break;case 'heartbeat':break;default:cb=ba;if(h.isEnabled('mchannel_detailed_log')){q.warn('_onRequestSuccess: invalid channel response, resending request: %s',JSON.stringify(bb));}else q.warn('_onRequestSuccess: invalid channel response, sending request again.');break;}if('seq' in bb)ga=bb.seq;ab.exit(cb);}function ua(ab){var bb=ab.seq-ab.ms.length;for(var cb=0;cb<ab.ms.length;cb++){var db=bb+cb;la++;if(db>=ga){if(ia)ab.ms[cb]=ia(ab.ms[cb]);if(ab.ms[cb].type==='skywalker'){l.emit(m.SKYWALKER_MESSAGE,ab.ms[cb]);}else if(ab.ms[cb].type==='qprimer'){sa();}else z.emit(z.CHANNEL_MESSAGE,ab.ms[cb]);}}}function va(){if(!z.xhrEnabled||ea)return;ea=Object.assign(k,i.config);fa=i.info;ga=fa.seq;o.addListener(o.ANOMALY,function(){z.exit('clock_anomaly');});w.addListener(w.HIDDEN,function(){z.exit('hidden');});w.addListener(w.VISIBLE,function(){z.exit('visible');});b.onbeforeunload=function(){if(ha)ha.abort();};if('sticky_token' in fa)ja=fa.sticky_token;wa();}function wa(){z.setDelay(ea.MIN_RETRY_INTERVAL);z.enter(fa.uri?'pull!':'reconnect!');}z=new u(n,oa);z.startChannel=va;z.setTransform=qa;z.xhrEnabled=!!b.XMLHttpRequest;z.CHANNEL_MESSAGE='channel_message';var xa;function ya(){z.emit(u.ENTER,{name:'stall',progress:u.ENTERED});if(h.isEnabled('mchannel_jumpstart'))wa();}function za(ab){p.getInstance('channel').log(ab.name,ab.status||ab.progress);if(ab.name!=='stall'){clearTimeout(xa);xa=y(ya,da);}}z.addListener(u.ENTER,za);z.addListener(u.EXIT,za);l.addListener(m.GET_RTI_SESSION_REQUEST,pa);f.exports=z;},null);
__d('MSearchOverlay',['setTimeoutAcrossTransitions','$','CSS','DOM','MLegacyDataStore','MSearchConst','MSearchTrendingLogger','MViewport','MLinkHack','Stratcom','URI','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=function(u){var v=i(u.overlay),w=k.find(v,'div','typeahead-hardpoint'),x=i(u.textinput),y=u.nullstate,z=u.emptyStatePromo;if(x.tagName!=='input')x=k.find(x,'input');var aa=l.get(w);if(aa.typeahead){ba();}else q.listen('m:search-typeahead:ready',null,ba);function ba(){var ca=aa.typeahead;q.listen('m:text-input:clear',null,la);var da,ea=true;function fa(){return Math.max(s.getDim(v).y+o.getHeaderHeight(),o.getScreenHeight());}function ga(){if(!z)return;j.conditionShow(z,ca.getValue().length===0);}function ha(oa){da=o.addHeightConstraint(fa());j.conditionClass(i("page"),'sideSearchShowing',true);o.scrollToHeader();ga();if(y&&ca.getValue().length===0)ia(y);}function ia(oa){var pa=oa.getElementsByClassName('jx-typeahead-results')[0].getAttribute('data-query'),qa=[],ra=[],sa=oa.getElementsByClassName('jx-result');for(var ta=0;ta<sa.length;ta++){qa.push(sa[ta].getAttribute('data-topic'));ra.push(ta+1);}n.registerTrendingTopicListeners(qa,m.msite_news_non_gs_null_state,ra,pa);n.logTrendingTopicImpressions(qa,m.msite_news_non_gs_null_state,ra,pa);}function ja(oa){j.conditionClass(i("page"),'sideSearchShowing',false);da&&da.release();da=null;}function ka(oa){q.invoke('log-m-search-session-end',null,{reason:oa});}function la(){ca.clear();ca.refresh();}function ma(){ea=false;la();na();ga();}function na(){x.blur();}q.listen('m:chrome:tab:show','search',function(oa){ha();x.focus();});q.listen('m:chrome:tab:hide','search',function(oa){ka('cancel');ma();ja();});ca.listen('show',function(){h(function(){da&&da.setValue(fa());},0);if(y)if(ca.getValue().length>0){k.hide(y);}else k.show(y);ga();});k.listen(w,'click','typeahead-result',function(oa){var pa=q.invoke('m:search-typehead:click',null,oa.getNode('typeahead-result')),qa=pa.getData();p.safe(qa,function(ra){ra.href=new r(ra.href).addQueryData('refid',m.refid);});pa.setData(qa);if(pa.getPrevented()){if(pa.getStopped()){oa.kill();}else oa.prevent();na();}else{setTimeout(function(){ma();},0);ja();}});ca.listen('refresh-viewport',function(){q.context().prevent();});ca.listen('choose',function(){q.context().prevent();});v.onclick=function(){x.focus();};k.listen(v,'touchstart','jx-result',na);k.listen(x,'focus',null,function(oa){ea=true;o.scrollToHeader();});ca.listen('blur',function(oa){if(ea)oa.prevent();});q.listen('m:side-area:hide',null,function(){ka('back');ja();});}};g.main=t;},null);
__d('Layout.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'Layout',render:function(){var l=[],m=[],n=null;h.Children.forEach(this.props.children,function(p,q){if(!p)return;var r=n!==null,s=h.cloneElement(p,{className:j(p.props.className,r?"_4bl8":''),key:q});if(n===null){if(p.type===k.FillColumn){n=s;}else l.push(s);}else m.push(s);});m.reverse();var o=l.concat(m);if(n)o.push(n);return (h.createElement('div',babelHelpers['extends']({},this.props,{className:j(this.props.className,'clearfix')}),o));}});k.Column=h.createClass({displayName:'Column',render:function(){return (h.createElement('div',babelHelpers['extends']({},this.props,{className:j(this.props.className,"_4bl7")})));}});k.FillColumn=h.createClass({displayName:'FillColumn',render:function(){return (h.createElement('div',babelHelpers['extends']({},this.props,{className:j(this.props.className,"_4bl9")})));}});f.exports=k;},null);
__d('fbglyph',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){throw new Error('fbglyph'+'('+JSON.stringify(i)+'): '+'Unexpected fbglyph reference.');}f.exports=h;},null);
__d('ReactFragment',['ReactChildren','ReactElement','emptyFunction','invariant','warning'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=/^\d+$/,n=false,o={create:function(p){if(typeof p!=='object'||!p||Array.isArray(p)){l(false,'React.addons.createFragment only accepts a single object. Got: %s',p);return p;}if(i.isValidElement(p)){l(false,'React.addons.createFragment does not accept a ReactElement '+'without a wrapper object.');return p;}!(p.nodeType!==1)?k(0):void 0;var q=[];for(var r in p)h.mapIntoWithKeyPrefixInternal(p[r],q,r,j.thatReturnsArgument);return q;}};f.exports=o;},null);
__d('ReactLayer',['React','ReactDOM','ReactBrowserEventEmitter','SubscriptionsHandler','emptyFunction','getObjectValues','invariant','renderSubtreeIntoContainer','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={componentDidMount:function(){this._layerContainer=document.createElement('div');this._renderContentIntoContainer();this.layer=this.createLayer(this._layerContainer);!this.layer?n(0):void 0;this.layerSubscriptions=new k();this.layerSubscribe('show',function(){return this.props.onToggle&&this.props.onToggle(true);}.bind(this));this.layerSubscribe('hide',function(){return this.props.onToggle&&this.props.onToggle(false);}.bind(this));this.layerSubscribe('blur',function(){return this.props.onBlur&&this.props.onBlur();}.bind(this));this._resetBehaviors();},componentDidUpdate:function(s){this._renderContentIntoContainer();this.receiveProps(this.props,s);},componentWillUnmount:function(){i.unmountComponentAtNode(this._layerContainer);this._layerContainer=null;if(this.layerSubscriptions){this.layerSubscriptions.release();this.layerSubscriptions=null;}if(this.layer){this.layer.destroy();this.layer=null;}},_renderContentIntoContainer:function(){var s=false;o(this,h.createElement('div',null,this.props.children),this._layerContainer,function(){if(s)p(function(){if(this.layer&&this.layer.isShown())this.layer.updatePosition();}.bind(this));}.bind(this));s=true;},render:function(){return null;},enumerateBehaviors:function(s){s=this.getEffectiveBehaviors(s);return m(s).filter(l.thatReturnsArgument);},_resetBehaviors:function(){this._diffBehaviors({},this.props.behaviors);},updateBehaviors:function(s,t){this._diffBehaviors(s,t);},_diffBehaviors:function(s,t){s=this.getEffectiveBehaviors(s);t=this.getEffectiveBehaviors(t);var u;for(u in s)if(!t[u])this.layer.disableBehavior(s[u]);for(u in t){var v=s[u],w=t[u];if(v&&w){!(v===w)?n(0):void 0;continue;}v&&this.layer.disableBehavior(v);w&&this.layer.enableBehavior(w);}},getEffectiveBehaviors:function(s){if(!this.getDefaultEnabledBehaviors)return s||{};return babelHelpers['extends']({},this.getDefaultEnabledBehaviors(),s);},layerSubscribe:function(s,t){var u=this.layer,v=u.subscribe||u.addListener;this.layerSubscriptions.addSubscriptions(v.call(u,s,function(w,x){j.isEnabled()&&t(w,x);}));}},r={createClass:function(s){return h.createClass({mixins:[q,s]});}};f.exports=r;},null);
__d('ReactLayeredComponentMixin',['ExecutionEnvironment','ReactInstanceMap','ReactCurrentOwner','React','ReactDOM','ReactFragment','renderSubtreeIntoContainer'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o={componentWillMount:function(){if(h.canUseDOM)this._layersContainer=document.createElement('div');},componentDidMount:function(){this._renderLayersIntoContainer();},componentDidUpdate:function(){this._renderLayersIntoContainer();},componentWillUnmount:function(){l.unmountComponentAtNode(this._layersContainer);},_renderLayersIntoContainer:function(){j.current=i.get(this);var p;try{p=this.renderLayers();}finally{j.current=null;}if(p&&!Array.isArray(p)&&!k.isValidElement(p))p=m.create(p);n(this,k.createElement('div',null,p),this._layersContainer);}};f.exports=o;},null);
__d('Tokenizer',['setTimeoutAcrossTransitions','CSS','MLegacyDataStore','DOM','MAdsUtils','Stratcom','createDeprecatedProperties','destroyOnUnload','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r){'use strict';this._containerNode=r;this._listeners=[];o(function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;}.bind(this));}q.prototype.start=function(){'use strict';this._orig=k.find(this._containerNode,'input','tokenizer-input');this._tokens=[];this._tokenMap={};var r=this.buildInput(this._orig.value);this._focus=r;var s=k.scry(this._containerNode,'div','tokenizer-input-container');s=s[0]||this._containerNode;this._listeners.push(k.listen(r,['click','focus','blur','keydown','keypress'],null,this.handleEvent.bind(this)),k.listen(s,'click',null,function(y){if(y.getNode('remove')){this._remove(j.get(y.getNode('token')).key);}else if(y.getTarget()==this._root)this.focus();}.bind(this)));var t=k.create('div');t.id=this._orig.id;i.conditionClass(t,'jx-tokenizer',true);t.style.cursor='text';this._root=t;t.appendChild(r);var u=this._typeahead;u.setInputNode(this._focus);u.start();var v=this._orig.parentNode;k.setContent(v,t);var w=this._initialValue||{};for(var x in w)this.addToken(x,w[x],v);k.appendContent(t,k.create('div',{style:{clear:'both'}}));this._redraw();};q.prototype.setInitialValue=function(r){'use strict';this._initialValue=r;return this;};q.prototype.setTypeahead=function(r){'use strict';r.setAllowNullSelection(false);r.removeListener();r.listen('show',function(s){if(this._tokenMap){var t=s.show,u=[];for(var v=0;v<t.length;++v){var w=t[v],x=k.scry(w,'a','typeahead-result')[0];if(x)x.removeAttribute('href');if(!(t[v].rel in this._tokenMap))u.push(t[v]);}t.length=0;t.push.apply(t,u);}}.bind(this));r.listen('choose',function(s){m.context().prevent();var event=m.invoke('Tokenizer-addedtoken',null,s);if(event.getPrevented())return;var t=JSON.parse(s.getAttribute('data-extra'));if(this.addToken(s.rel,s.name,s,t)){if(this.shouldHideResultsOnChoose())this._typeahead.hide();this._typeahead.clear();this._redraw();this.focus();}}.bind(this));r.listen('query',function(s){if(s.length)m.context().prevent();}.bind(this));this._typeahead=r;o(this._typeahead.removeListener.bind(this._typeahead));return this;};q.prototype.shouldHideResultsOnChoose=function(){'use strict';return true;};q.prototype.handleEvent=function(r){'use strict';this._typeahead.handleEvent(r);if(r.getPrevented())return;if(r.getType()=='click'){if(r.getTarget()==this._root){this.focus();r.prevent();return;}}else if(r.getType()=='keydown'){this._onkeydown(r);}else if(r.getType()=='blur')this._redraw();};q.prototype.refresh=function(){'use strict';this._redraw(true);return this;};q.prototype._redraw=function(r){'use strict';var s=this._focus;if(s.value===this._lastvalue&&!r)return;this._lastvalue=s.value;var t=k.textMetrics(this._focus,'jx-tokenizer-metrics');t.y=null;t.x+=24;t.setDim(s);s.value=s.value;if(this._typeahead)this._typeahead.refresh();};q.prototype.addToken=function(r,s,t,u){'use strict';if(r in this._tokenMap)return false;var v=this._focus,w=this._root,x=this.buildToken(r,s,t);this._tokenMap[r]={value:s,key:r,node:x};if(u)Object.keys(u).forEach(function(y){if(!(y in this._tokenMap[r]))this._tokenMap[r][y]=u[y];}.bind(this));this._tokens.push(r);w.insertBefore(x,v);this.invoke('added',r);return true;};q.prototype.clearTokens=function(){'use strict';for(var r in this._tokenMap){k.remove(this._tokenMap[r].node);delete this._tokenMap[r];}this.refresh();};q.prototype.removeToken=function(r){'use strict';if(r in this._tokenMap){var s=this._tokenMap[r].node;delete this._tokenMap[r];k.remove(s);this._redraw(true);return true;}return false;};q.prototype.buildInput=function(r){'use strict';return k.create('input',{className:'jx-tokenizer-input',type:'text',autocomplete:'off',value:r});};q.prototype.buildToken=function(r,s,t){'use strict';var u=k.create('input',{type:'hidden',value:r,name:this._orig.name+'['+this._seq+++']'}),v=k.create('a',{className:'jx-tokenizer-x',sigil:'remove'},'\u00d7');return k.create('a',{className:'jx-tokenizer-token',sigil:'token',meta:{key:r}},[s,u,v]);};q.prototype.getTokens=function(){'use strict';var r={};for(var s in this._tokenMap)r[s]=this._tokenMap[s].value;return r;};q.prototype.getTokensWithData=function(){'use strict';return l.clone(this._tokenMap,'node');};q.prototype._onkeydown=function(r){'use strict';switch(r.getSpecialKey()){case 'tab':var s=this._typeahead.submit();if(this.getNextInput()){if(!s)this._focus.value='';h(function(){this.getNextInput().focus();}.bind(this),0);}break;case 'delete':if(!this._focus.value.length){var t;while(t=this._tokens.pop())if(this._remove(t))break;}break;case 'return':break;default:if(this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit())r.prevent();h(this._redraw.bind(this),0);break;}};q.prototype._remove=function(r){'use strict';var s=this.removeToken(r);if(s){this.focus();this.invoke('removed',r);}return s;};q.prototype.focus=function(){'use strict';var r=this._focus;k.show(r);h(function(){r.focus();},0);};p(q,['added','removed']);n(q,{limit:null,nextInput:null});Object.assign(q.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});f.exports=q;},null);
__d('Typeahead',['setTimeoutAcrossTransitions','CSS','DOM','MTouchHelper','MViewport','Vector','createDeprecatedProperties','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q,r){'use strict';this._hardpoint=q;this._control=r||j.find(q,'input');this._root=j.create('div',{className:'jx-typeahead-results',sigil:'jx-typeahead-results'});this._display=[];this._listener=j.listen(this._control,['focus','blur','keypress','keydown','input'],null,this.handleEvent.bind(this));j.listen(this._root,[k.EVT_TOUCHSTART,k.EVT_TOUCHEND,k.EVT_TOUCHCANCEL],'tag:a',this._handleRootTouch.bind(this));if(q.id)p._instances[q.id]=this;}p.prototype.start=function(){'use strict';this.invoke('start');};p.prototype.setTypeObjects=function(q){'use strict';this._typeObjects=q;};p.prototype.setTypeObjectsOrder=function(q){'use strict';this._typeObjectsOrder=q;};p.prototype.setDatasource=function(q){'use strict';if(this._datasource){this._datasource.unbindFromTypeahead();this._waitingListener.remove();this._readyListener.remove();}this._waitingListener=q.listen('waiting',this.waitForResults.bind(this));this._readyListener=q.listen('resultsready',this.showResults.bind(this));q.bindToTypeahead(this);this._datasource=q;};p.prototype.getDatasource=function(){'use strict';return this._datasource;};p.prototype.getTypeaheadType=function(){'use strict';return 'm_legacy';};p.prototype.setInputNode=function(q){'use strict';this._control=q;return this;};p.prototype.hide=function(){'use strict';this._changeFocus(Number.NEGATIVE_INFINITY);this._display=[];if(this._root)j.hide(this._root);this.invoke('hide');};p.prototype.showResults=function(q){'use strict';this.invoke('render_start');var r={show:q},s=this.invoke('show',r);if(this._typeObjects&&this._typeObjectsOrder){var t={};for(var u=0;u<q.length;u++){var v=q[u].firstElementChild?q[u].firstElementChild.getAttribute('renderType'):null;if(!v)continue;if(!(v in t))t[v]=[];t[v].push(q[u]);}var w=[];for(var x in this._typeObjectsOrder){v=this._typeObjectsOrder[x];var y=t[v];if(y){var z=document.createElement('div');j.setContent(z,this._typeObjects[v].xhp);w.push(z.firstChild);w.push.apply(w,y);}}j.setContent(this._root,w);}else j.setContent(this._root,q);this._display=j.scry(this._root,'a','typeahead-result');if(this._display.length&&!s.getPrevented()){this._changeFocus(Number.NEGATIVE_INFINITY);var aa=m.getDim(this._hardpoint);aa.x=0;aa.setPos(this._root);if(this._root.parentNode!==this._hardpoint)this._hardpoint.appendChild(this._root);j.show(this._root);}else{this.hide();j.setContent(this._root,null);}this._refreshViewport();};p.prototype.refresh=function(){'use strict';this._refreshViewport();if(this._stop)return;this._value=this._control.value;this.invoke('update',this._value);this.invoke('change',this._value,this._control);};p.prototype.waitForResults=function(){'use strict';this.hide();};p.prototype._changeFocus=function(q){'use strict';var r=Math.min(Math.max(-1,this._focus+q),this._display.length-1);if(!this.getAllowNullSelection())r=Math.max(0,r);if(this._focus>=0&&this._focus<this._display.length)i.conditionClass(this._display[this._focus],'focused',false);this._focus=r;this._drawFocus();return true;};p.prototype._drawFocus=function(){'use strict';var q=this._display[this._focus];if(q)i.conditionClass(q,'focused',true);};p.prototype._choose=function(q,r){'use strict';var s=this.invoke('choose',q,r);if(s.getPrevented())return;this._control.value=q.name;this.hide();};p.prototype.clear=function(){'use strict';this._control.value='';this._value='';this.invoke('clear');this.hide();};p.prototype.enable=function(){'use strict';this._control.disabled=false;this._stop=false;};p.prototype.disable=function(){'use strict';this._control.blur();this._control.disabled=true;this._stop=true;};p.prototype.submit=function(){'use strict';if(this._focus>=0&&this._display[this._focus]){this._choose(this._display[this._focus],this._focus);return true;}else{var q=this.invoke('query',this._control.value);if(q.getPrevented())return true;}return false;};p.prototype.setValue=function(q){'use strict';this._control.value=q;};p.prototype.getValue=function(){'use strict';return this._control.value;};p.prototype._refreshViewport=function(){'use strict';var q=this.invoke('refresh-viewport');if(!q.getPrevented()){var r=this._display&&this._display.length;if(r&&!this._heightConstraint){var s=m.getPos(this._root).y,t=m.getDim(this._root).y,u=l.getBoundingRect().height;if(s+t>u){var v=l.getHeaderHeight()+s+t;this._heightConstraint=l.addMinHeightConstraint(v);}}else if(this._heightConstraint&&!r){this._heightConstraint.release();this._heightConstraint=null;}}this.invoke('rendered');};p.prototype._update=function(event){'use strict';var q=event&&event.getSpecialKey();if(q&&event.getType()=='keydown')switch(q){case 'up':if(this._display.length&&this._changeFocus(-1))event.prevent();break;case 'down':if(this._display.length&&this._changeFocus(1))event.prevent();break;case 'return':if(this.submit()){event.prevent();return;}break;case 'esc':if(this._display.length&&this.getAllowNullSelection()){this.hide();event.prevent();}break;case 'tab':return;}h(function(){if(this._value==this._control.value)return;this.refresh();}.bind(this),0);};p.prototype.handleEvent=function(q){'use strict';this.invoke(q.getType(),q);if(this._stop||q.getPrevented())return;var r=q.getType();if(r=='blur'){this._hasFocus=false;h(function(){if(!this._hasFocus)this.hide();}.bind(this),this.getBlurDefer());}else if(r=='focus'){this._hasFocus=true;}else this._update(q);};p.prototype.removeListener=function(){'use strict';if(this._listener)this._listener.remove();};p.prototype._handleRootTouch=function(q){'use strict';if(q.getType()===k.EVT_TOUCHSTART){this._rootTouchPos=k.getTouchPageCoord(q);this._rootTouchLink=q.getNode('tag:a')||undefined;var r=this._display[this._focus];if(r){i.conditionClass(r,'focused',false);this._focus=-1;}}else if(this._rootTouchPos){if(this._rootTouchLink===q.getNode('tag:a')){var s=k.getTouchPageCoord(q),t=this._rootTouchPos,u=3;if(Math.abs(s.x-t.x)<u&&Math.abs(s.y-t.y)<u)this._choose(this._rootTouchLink,null);}delete this._rootTouchLink;delete this._rootTouchPos;}if(q.getType()===k.EVT_TOUCHEND)q.prevent();};p.getInstance=function(q){'use strict';return p._instances[q];};o(p,['choose','query','start','change','show','focus','blur','keypressed','keypress','keydown','input','hide','clear','render_start','rendered','update','scroll','refresh-viewport']);n(p,{allowNullSelection:true,normalizer:null,blurDefer:0});Object.assign(p.prototype,{_root:null,_control:null,_hardpoint:null,_listener:null,_value:null,_stop:false,_focus:-1,_display:[],_hasFocus:false,_datasource:null,_waitingListener:null,_readyListener:null,_typeObjects:null,_typeObjectsOrder:null,_heightConstraint:null});Object.assign(p,{_instances:{}});f.exports=p;},null);
__d('MGroupsTypeaheadCompositeSource',['cx','DOM','fbt','TypeaheadCompositeSource'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,k);m=l&&l.prototype;function n(o){m.constructor.call(this,o);this.groupKey='category';this.addFriendsTitle=j._("\u0414\u041e\u0411\u0410\u0412\u0418\u0422\u042c \u0414\u0420\u0423\u0417\u0415\u0419");this.addOthersTitle=j._("\u0414\u041e\u0411\u0410\u0412\u0418\u0422\u042c \u0414\u0420\u0423\u0413\u0418\u0425");this.inviteOthersTitle=j._("\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418\u0422\u042c \u0414\u0420\u0423\u0413\u0418\u0425");}n.prototype.renderTab=function(o,p){var q=[];if(!p||p.length===0)return q;q.push(i.create('div',{className:"_336p"},o));return q.concat(p);};n.prototype.mergeResults=function(o,p){var q=[],r=[],s=[],t=[],u={},v;if(p.length===0)return o;for(v=0;v<o.length;++v)if(o[v][this.mergeKey]){u[o[v][this.mergeKey]]=true;t.push(o[v]);}for(v=p.length-1;v>=0;--v)if(p[v][this.mergeKey]&&!(p[v][this.mergeKey] in u)){u[p[v][this.mergeKey]]=true;t.push(p[v]);}for(v=0;v<t.length;++v)if(t[v][this.groupKey]==='othersToInvite'){s.push(t[v]);}else if(t[v][this.groupKey]==='othersToAdd'){r.push(t[v]);}else q.push(t[v]);return this.renderTab(this.addFriendsTitle,q).concat(this.renderTab(this.addOthersTitle,r)).concat(this.renderTab(this.inviteOthersTitle,s));};f.exports=n;},null);
__d('MPlaces',['$','DOM','MLegacyDataStore','LoadingIndicator','MRequest','Stratcom','MPageController','MURI','URI','XPlacesUpdateLocationController','ViewerLocationSource','FWLoader'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=c('FWLoader').FW,t={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function(u){t._JSONLocation=u;},getCurrentJSONLocation:function(){return t._JSONLocation;},setLocationSearchMode:function(u){t._currentSearchMode=u;},getLocationSearchMode:function(){return t._currentSearchMode;},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&s.isIOS()&&t.enableFWGeolocation;},updateLocation:function(u){if(u){if(t.shouldUseFWGeolocation())u={coords:u};var v={},w;for(var x=0;x<t.desiredProperties.length;x++){w=t.desiredProperties[x];if(u.coords[w])v[w]=u.coords[w];}if(u.timestamp)v.timestamp=u.timestamp/1000;t._JSONLocation=JSON.stringify(v);t.sendCurrentLocationToServer();if(t.pendingForm){t.submitForm(t.pendingForm);}else if(t.pendingHref)t.gotoPage(t.pendingHref);t.pendingForm=null;t.pendingHref='';m.invoke('location-update',null,{position:u});}},handleError:function(u){t.clearWatch();m.invoke('location-error',null,{error:u});if(t.pendingForm){t.submitForm(t.pendingForm);t.pendingForm=null;}else if(t.pendingHref){t.gotoPage(t.pendingHref);t.pendingHref='';}},sendCurrentLocationToServer:function(){var u=Date.now();if(u-t._lastUpdateTime>t.UPDATE_LOCATION_INTERVAL){t._lastUpdateTime=u;var v=q.getURIBuilder().setString('json_location',t._JSONLocation).setEnum('source',r.MSITE_PLACES).getURI();new l(v).setMethod('POST').send();}},gotoPage:function(u){var v=new p(u);v.addQueryData('json_location',t._JSONLocation);n.load(v);},submitForm:function(u){u.appendChild(i.create('input',{name:'json_location',type:'hidden',value:t._JSONLocation}));if(!u.onsubmit||u.onsubmit())u.submit();},clearWatch:function(){if(!t.watchID)return;if(t.shouldUseFWGeolocation()){s.geolocation.clearWatch();}else navigator.geolocation.clearWatch(t.watchID);t.watchID=null;},watchPosition:function(){if(t.shouldUseFWGeolocation()){t.watchID=1;s.geolocation.watchPosition(t.updateLocation,t.handleError);s.geolocation.getCurrentPosition(t.updateLocation);}else{var u=setTimeout(t.handleError,t.locationOptions.timeout);t.watchID=navigator.geolocation.watchPosition(function(v){clearTimeout(u);t.updateLocation(v);},function(v){clearTimeout(u);t.handleError(v);},t.locationOptions);}},monitorLocation:function(){t.clearWatch();t.watchPosition();l.listen('postprocess',function(){if(!document.getElementById('place_update')&&t.watchID)t.clearWatch();});},submitFormWithLocation:function(u){if(typeof u=='string')u=h(u);var v=t;k.show();if(v.watchID&&v._JSONLocation){v.submitForm(u);return;}v.pendingHref='';v.pendingForm=u;v.monitorLocation();return false;},gotoPageWithLocation:function(u){var v=t;k.show();if(v.watchID&&v._JSONLocation){v.gotoPage(u);return;}v.pendingForm=null;v.pendingHref=u;v.monitorLocation();return false;},onClick:function(event){event.kill();var u=j.get(event.getNode(t.LINK_SIGIL));t.gotoPageWithLocation(u.href);},onSubmit:function(event){event.kill();var u=i.find(event.getNode(t.FORM_SIGIL),'form');t.submitFormWithLocation(u);}};f.exports=t;},null);
__d('MOpenable',['CSS','Stratcom'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='openable',k='opened',l;function m(o){l=o;h.conditionClass(l,k,true);}function n(){if(l){h.conditionClass(l,k,false);l=null;}}i.listen('touchstart',null,function(event){if(event.getNode(j)!=l)n();});i.listen('click',null,function(event){var o=event.getNode(j),p=l;n();if(o&&o!=p)m(o);});i.listen('touchcancel',null,n);g.main=function(){};},null);
__d('MTouchTransferFocus',['CSS','DOM','Stratcom','MViewport','MLegacyDataStore'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='transfer-focus-container',n='focus-provider',o='focus-receiver',p='focused';j.listen(['click','touchend'],[m,n],function(q){var r=q.getNode(n),s=l.get(r);if(s.onclickIsSet)return;var t=q.getNode(m);r.onclick=function(){h.conditionClass(t,p,true);var u=i.scry(t,'input',o)[0];if(u){u.focus();var v=l.get(t);if(v.hideaddressbar)setTimeout(function(){if(k.getScrollTop()<1)k.scrollTo(0,1);},0);}};s.onclickIsSet=true;});j.listen('blur',[m,o],function(q){h.conditionClass(q.getNode(m),p,false);});},null);
__d('MFeedDiscovery',['Bootloader','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=null;function k(l,m,n){this.$MFeedDiscovery1=null;this.$MFeedDiscovery2=false;if(j){this.$MFeedDiscovery1=new j(l,m,n);}else h.loadModules(["MBootloadedFeedDiscovery"],function(o){j=o;if(!this.$MFeedDiscovery2)this.$MFeedDiscovery1=new o(l,m,n);});i(this.destroy.bind(this));}k.prototype.destroy=function(){this.$MFeedDiscovery2=true;this.$MFeedDiscovery1&&this.$MFeedDiscovery1.destroy&&this.$MFeedDiscovery1.destroy();};f.exports=k;},null);
__d('MTextInputClearable',['setTimeoutAcrossTransitions','$','DOM','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=function(m){var n=i(m.wrapper),o=j.find(n,'input','clearableInput'),p=j.find(n,'div','clearButton'),q=getComputedStyle(n).getPropertyValue("display").indexOf('inline-')!==-1,r=[],s;function t(){if(s)clearTimeout(s);if(q&&!n.style.width)n.style.width=n.clientWidth+'px';j.show(p);}function u(){j.hide(p);}function v(z){s=h(function(){u();},0);}function w(z){if(!o.value.length){u();}else if(p.style.display==='none')t();}function x(z){o.value='';u();o.focus();k.invoke('m:text-input:clear',null,o);}function y(){if(s)clearTimeout(s);if(!k.hasSigil(o,'permanentInput')){r.forEach(function(z){z.remove();});r=null;}}r.push(j.listen(o,'blur',null,v),j.listen(o,['focus','keyup'],null,w),j.listen(p,'click',null,x),k.listen('m:page:unload',null,y));};g.main=l;},null);
__d('MQuickSearch',['$','DOM','HTML','MRequest','MRequestTypes','MViewport','Stratcom','Vector','destroyOnUnload','eventsMixinDeprecated','setIntervalAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=[];function t(u,v){'use strict';this._uri=u.uri;this._args=u.args||{};var w=h(u.nodeID);this._input=i.find(w,'input','quicksearch-input');this._button=i.scry(w,'*','quicksearch-button')[0];this._container=h(u.containerID);this._resultsBoxID=u.resultsBoxID;this._resultsBox=h(this._resultsBoxID);this._shouldScroll=u.shouldScroll;if(u.throbber)this._throbber=new j(u.throbber);this._request=null;this._searchLogger=v||null;this._listeners=[i.listen(this._input,'focus',null,this._focus.bind(this)),i.listen(this._input,'blur',null,this._cleanup.bind(this)),i.listen(this._input,'keydown',null,this._handleKeyDown.bind(this)),i.listen(this._input,'keyup',null,this._handleKeyUp.bind(this))];if(this._button)this._listeners.push(i.listen(this._button,'click',null,this._click.bind(this)));if(this._args.bootstrap)this.search(this._input.value);s.push(this);p(function(){n.removeCurrentListener();s.forEach(function(x){return x._destroy();});s=[];});}t.prototype._handleKeyDown=function(event){'use strict';this._scrollToContainer();this._previousText=this._input.value;};t.prototype._handleKeyUp=function(event){'use strict';if(event.getSpecialKey()==='delete'&&(this._args.bootstrap||this._args.showInitialResultsOnClear)){var u=this._input.value;if(u.trim()===''&&u!==this._previousText)this.reset();}};t.prototype._scrollToContainer=function(){'use strict';if(this._shouldScroll)m.scrollTo(o.getPos(this._container));};t.prototype._update=function(){'use strict';var u=this._input.value;if(this._previousText==u)return;this._previousText=u;if(/^\s*$/.test(u)&&!this._args.bootstrap){this._resetContent();this._abortRequest();return;}this._saveInitialNodes();this.search(u);};t.prototype.search=function(u){'use strict';if(this.invoke('search',u).getPrevented())return;this._throbber&&i.setContent(this._resultsBox,this._throbber);this.addQueryParameters({q:u||''});this._abortRequest();if(this._searchLogger)this._searchLogger.onSearch(this._args);this._request=new k(this._uri);this._request.setType(l.DEPENDENT);this._request.listen('done',function(v){this._resultsBox=h(this._resultsBoxID);if(this._searchLogger)this._searchLogger.onResults(this._request,this._resultsBox);if(this._needsDefaultNodes){this._saveInitialNodes();this._needsDefaultNodes=false;}this._request=null;}.bind(this));this._request.setMethod('GET');this._request.setData(this._args).send();};t.prototype._abortRequest=function(){'use strict';this._request&&this._request.abort()&&(this._request=null);};t.prototype._resetContent=function(){'use strict';this._resultsBox=h(this._resultsBoxID);i.setContent(this._resultsBox,this._initialNodes);};t.prototype.resetToThrobber=function(){'use strict';this._resultsBox=h(this._resultsBoxID);if(this._throbber&&this._resultsBox)i.setContent(this._resultsBox,this._throbber);};t.prototype.addQueryParameters=function(u){'use strict';Object.assign(this._args,u);};t.prototype.maybeAddQueryParameters=function(u){'use strict';for(var v in u)if(!(v in this._args))this._args[v]=u[v];};t.prototype.clear=function(){'use strict';this._input.value='';this._initialNodes=null;};t.prototype._focus=function(event){'use strict';this._focused=true;if(this._button){this._button.setAttribute('type','button');this._button.disabled=false;}this._scrollToContainer();this._previousText=this._input.value;clearInterval(this._interval);this._interval=r(this._update.bind(this),300);};t.prototype._click=function(event){'use strict';event.prevent();this.reset();};t.prototype._cleanup=function(){'use strict';if(this._searchLogger)this._searchLogger.onCleanup();this._focused=false;if(!this._input.value&&this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}clearInterval(this._interval);};t.prototype.reset=function(){'use strict';this._abortRequest();this._cleanup();this._saveInitialNodes();this._resetContent();this._input.value='';this._input.blur();if(this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}if(this._args.showInitialResultsOnClear)this.search('');this._scrollToContainer();};t.prototype._saveInitialNodes=function(){'use strict';if(!this._initialNodes)this._initialNodes=Array.from(this._resultsBox.childNodes);};t.prototype._destroy=function(){'use strict';this._listeners.forEach(function(u){return u&&u.remove();});this._listeners.length=0;};t.prototype.setNeedsDefaultNodes=function(){'use strict';this._needsDefaultNodes=true;};t.getInstances=function(){'use strict';return s;};q(t,['search']);Object.assign(t.prototype,{_uri:null,_args:null,_input:null,_button:null,_container:null,_resultsBox:null,_shouldScroll:true,_throbber:null,_focused:false,_initialNodes:null,_previousText:null,_interval:null,_needsDefaultNodes:false,_searchLogger:null});f.exports=t;},null);
__d('MTypeaheadSourceWithExclusions',['MTypeaheadTouchSource','Stratcom'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o){'use strict';k.constructor.call(this,m,n);var p=this.addExcludeID.bind(this);i.listen('mtypeahead:exclusions',o,function(q){var r=q.getData().ids;for(var s=0;s<r.length;++s)p(r[s]);});}l.prototype.sortHits=function(m,n){'use strict';for(var o=n.length-1;o>=0;--o)if(this._excludeIDs[n[o]])n.splice(o,1);h.prototype.sortHits.apply(this,arguments);};f.exports=l;},null);
__d('MTypeaheadTouchSourceWithSuggestions',['setTimeoutAcrossTransitions','MTypeaheadTouchSource','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o);this.setSuggestions(p);var q=[];for(var r=0;r<p.length;++r)q.push(p[r].uid);this.setSuggestionsIds(q);this.setDefaultSuggestionsIds(q);}m.prototype.didStart=function(){'use strict';i.prototype.didStart.call(this);h(function(){var n=this.renderNodes(null,this.getSuggestionsIds());this.invoke('resultsready',n);this.invoke('complete');}.bind(this),0);};m.prototype.matchResults=function(n){'use strict';if(n.length===0){var o=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)o=this.getDefaultSuggestionsIds();var p=this.renderNodes(null,o);this.invoke('resultsready',p);this.invoke('complete');}else i.prototype.matchResults.call(this,n);};j(m,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});f.exports=m;},null);
__d('InitMTokenizer',['$','MTypeaheadOnDemandSource','MTypeaheadSourceWithExclusions','MTypeaheadTouchSource','MTypeaheadTouchSourceWithSuggestions','Stratcom','Typeahead','TypeaheadCompositeSource','MGroupsTypeaheadCompositeSource'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=function(r,s){var t=null,u=s.element;if(s.id)u=document.getElementById(s.id);if(s.suggestions.length){t=new l(s.src,s.source_key,s.suggestions);}else if(t){r.setRemovableTokens(false);}else if(s.exclusions){t=new j(s.src,s.source_key,u.id);}else t=new k(s.src,s.source_key);if(s.ondemand_src){var v=new i(s.ondemand_src);if(s.maxresults)v.setMaximumResultCount(s.maxresults);var w=[t,v];if(s.groups_typeahead_merger){t=new p(w);}else t=new o(w);}if(s.excludeids)s.excludeids.forEach(function(aa){t.addExcludeID(aa);});if(s.maxresults)t.setMaximumResultCount(s.maxresults);if(t instanceof k||t instanceof i)t.setShowSecondaryAction(false);var x=s.textinput;if(typeof x==='string')x=h(x);var y=new n(u,x);y.setDatasource(t);y.setTypeObjects(s.typeObjects);y.setTypeObjectsOrder(s.typeObjectsOrder);r.setTypeahead(y);m.invoke('Tokenizer-setTypeahead',null,y);r.setInitialValue(s.initialtokens);r.setLabel(s.label);r.setPlaceholder(s.placeholder);r.setLimitWidth(s.limitwidth);r.setAddExtraData(s.addExtraData);if(s.limit)r.setLimit(s.limit);if(s.freeform){var z=new RegExp(s.freeform,'i');y.listen('change',function(aa){if(z&&z.test(aa)){t.lastChange=Date.now();var ba={uri:'#',name:aa,id:aa,display:aa},ca=[t.createNode(ba)];y.showResults(ca);m.context().kill();}});}if(s.needs_template_data&&Object.keys(s.initialtokens).length>0)y.disable();r.start();};g.main=q;},null);
__d('MTokenizer',['DOM','Tokenizer','createDeprecatedProperties','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,i);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.buildInput=function(p){'use strict';var q=h.create('input',{type:'text',className:'jx-tokenizer-input',sigil:'tokenizer-input focus-receiver',placeholder:this.getPlaceholder(),value:p});q.setAttribute('autocomplete','off');q.setAttribute('autocapitalize','off');q.setAttribute('autocorrect','off');q.setAttribute('aria-label',l._("\u0421\u043f\u0438\u0441\u043e\u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0441\u044f \u043d\u0438\u0436\u0435"));if(this.getPlaceholder()){this.placeholderWidth=o.estimatePlaceholderWidth(q)+'px';q.style.minWidth=this.placeholderWidth;}return q;};o.prototype.setLimitWidth=function(p){'use strict';this.limitWidth=p;};o.prototype.getLimitWidth=function(){'use strict';return this.limitWidth;};o.prototype.setAddExtraData=function(p){'use strict';this.addExtraData=p;};o.prototype.start=function(){'use strict';this._containerNode.tokenizer=this;i.prototype.start.call(this);if(this.getLabel()){var p=h.create('span',{className:'mTokenizerLabel'},this.getLabel());h.prependContent(this._root,p);}this.listen('removed',this.removedToken.bind(this));};o.prototype.removedToken=function(){'use strict';if(Object.keys(this._tokenMap).length===0){this._focus.placeholder=this.getPlaceholder();this._focus.style.minWidth=this.placeholderWidth;}if(this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()){h.show(this._focus);this._typeahead._control.disabled=false;this._typeahead._stop=false;this._typeahead.refresh();this.hasMaxTokens=false;}};o.prototype.addToken=function(p,q,r,s){'use strict';if(this.hasMaxTokens)return false;var t=i.prototype.addToken.call(this,p,q,r,s);if(!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()){this._typeahead.hide();this._typeahead.disable();h.hide(this._focus);this.hasMaxTokens=true;}return t;};o.prototype.removeToken=function(p){'use strict';var q=i.prototype.removeToken.call(this,p);q&&this.removedToken();return q;};o.prototype.buildToken=function(p,q,r){'use strict';var s=h.create('input',{sigil:'token-value',type:'hidden',value:p,name:this._orig.name+'['+this._seq+++']'}),t=null;if(r.getAttribute('weak_reference'))t=h.create('i',{className:'mWeakReferenceIcon'});var u=null;if(this.addExtraData&&r.getAttribute('data-extra'))u=h.create('input',{sigil:'token-extra-data',value:r.getAttribute('data-extra'),type:'hidden'});var v=this.getRemovableTokens()?h.create('span',{},'\u00a0\u00d7\u00a0'):null,w=h.create('a',{className:'touchable mCloseBtn',href:'#',sigil:'blocking-touchable remove'},v);w.setAttribute('aria-label',l._("\u0423\u0434\u0430\u043b\u0438\u0442\u044c"));this._focus.placeholder='';this._focus.style.minWidth=0;var x="mToken"+(this.getLimitWidth()?' '+"mTokenLimitWidth":'')+(r.getAttribute('weak_reference')?' '+"mTokenWeakReference":'')+(p<0?' '+"mTokenWithNegativeKey":'');if(this.getLimitWidth())q=h.create('span',{className:'innerToken'},q);return h.create('span',{className:x,sigil:'token',meta:{key:p}},[t,q,s,w,u]);};o.prototype.getTypeahead=function(){'use strict';return this._typeahead;};o.prototype.focus=function(){'use strict';};o.estimatePlaceholderWidth=function(p){'use strict';var q=p.value;p.value=p.placeholder;var r=h.textMetrics(p,'jx-tokenizer-metrics');p.value=q;return r.x;};j(o,{label:null,placeholder:null,removableTokens:true});Object.assign(o.prototype,{placeholderWidth:null,hasMaxTokens:false});f.exports=o;},null);
__d('MTokenizerBehavior',['CSS','Stratcom','MViewport','Vector'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m={addListener:function(n){if(l)return;l=true;i.listen('click',[['tokenizer','typeahead-result'],['remove']],function(o){o.prevent();});i.listen(['focus','blur'],'tokenizer-input',function(o){var p=o.getNode('tokenizer'),q=o.getType()=='blur';h.conditionClass(p,'blurred',q);if(q){if(n.clearvalueonblur||1)p.tokenizer&&p.tokenizer.getTypeahead().clear();}else if(n.shouldscroll)j.scrollTo(0,k.getPos(p).y);});}};f.exports=m;},null);
__d('MTokenizerWithSuggestions',['setTimeoutAcrossTransitions','CSS','DOM','MTokenizer','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.start=function(){'use strict';k.prototype.start.call(this);i.conditionClass(this._containerNode,'suggestions',true);var p=j.scry(this._containerNode,'div','tokenizer-suggestions-label');if(p.length){this.setLabel(p[0]);j.remove(p[0]);}this.listen('removed',function(){h(this._typeahead.refresh.bind(this._typeahead),0);}.bind(this));};o.prototype.setTypeahead=function(p){'use strict';k.prototype.setTypeahead.call(this,p);p.setBlurDefer(o.blurDefer);p.listen('choose',function(q){h(function(){this._typeahead.refresh();}.bind(this),0);}.bind(this));p.listen('show',function(q){var r=q.show,s=[],t=o.maxSuggestions;for(var u=0;u<r.length;++u)if(!(r[u].rel in this._tokenMap)){s.push(r[u]);if(s.length>=t)break;}var v=this.getLabel();if(v&&v.length>0&&s.length&&p.getValue()==='')s.unshift(v);r.length=0;r.push.apply(r,s);}.bind(this));};o.prototype.shouldHideResultsOnChoose=function(){'use strict';return this.getFocused();};o.prototype.updateSuggestionsIds=function(p){'use strict';this._typeahead._datasource.setSuggestionsIds(p);this._typeahead.refresh();};o.prototype.handleEvent=function(p){'use strict';var q=p.getType();if(q=='focus'||q=='blur'){this.setFocused(q=='focus');h(function(){this._typeahead.refresh();}.bind(this),o.blurDefer);p.stop();}else k.prototype.handleEvent.call(this,p);};l(o,{focused:false,label:null});Object.assign(o,{maxSuggestions:50,blurDefer:500});f.exports=o;},null);
__d('MSearchTypeaheadSeeMore',['DOM','MSearchTypeaheadSeeMoreExperiments','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=20;function m(){'use strict';this.$MSearchTypeaheadSeeMore1=this.$MSearchTypeaheadSeeMore2();this.$MSearchTypeaheadSeeMore3=h.create('a',{className:"touchable viewMore _2u_r",sigil:'touchable typeahead-result'},[this.$MSearchTypeaheadSeeMore4(),this.$MSearchTypeaheadSeeMore1]);}m.prototype.$MSearchTypeaheadSeeMore4=function(){'use strict';return h.create('div',{className:"_2u_s"},h.create('i',{className:"_2u_t"}));};m.prototype.$MSearchTypeaheadSeeMore2=function(){'use strict';return h.create('div',{className:"_2u_u"});};m.prototype.show=function(){'use strict';h.show(this.$MSearchTypeaheadSeeMore3);return this;};m.prototype.hide=function(){'use strict';h.hide(this.$MSearchTypeaheadSeeMore3);return this;};m.prototype.setQuery=function(n){'use strict';this.$MSearchTypeaheadSeeMore3.href='/search/top/?q='+encodeURIComponent(n);h.setContent(this.$MSearchTypeaheadSeeMore1,this.$MSearchTypeaheadSeeMore5(this.$MSearchTypeaheadSeeMore6(n)));return this;};m.prototype.injectInto=function(n){'use strict';var o=i.placement;if(o==='last'){o=n.length;}else o=Number(o);n.splice(o,0,this.$MSearchTypeaheadSeeMore3);return this;};m.prototype.$MSearchTypeaheadSeeMore5=function(n){'use strict';if(i.verbose)return k._(["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0434\u043b\u044f {query}","44e6d113d67af68d7209174cf9420c3d"],[k.param('query',n)]);return n;};m.prototype.$MSearchTypeaheadSeeMore6=function(n){'use strict';if(n.length>l)return n.substr(0,l-3)+'...';return n;};f.exports=m;},null);
__d('MSearchTypeahead',['DOM','CSS','MPageController','MPlaces','MRequest','MSearchTypeaheadSeeMore','SearchMTouchGlobalOptions','MURI','Stratcom','Typeahead','createDeprecatedProperties','cx','eventsMixinDeprecated','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();v=babelHelpers.inherits(x,q);w=v&&v.prototype;function x(y,z,aa){'use strict';var ba=h.find(y,'div','searchLoadingIndicator');h.hide(ba);w.constructor.call(this,y,z);this.loadingIndicator=ba;this.recentHeader=h.scry(y,'div','recentSearchesHeader')[0];this.hideRecentHeader();this.PYMKHeader=h.scry(y,'div','PYMKHeader')[0];this.hidePYMKHeader();this._typeaheadSessionID=null;this._seeMore=new m().hide();this.uberbarQRPromo=h.scry(document.body,'*','uberbarQRPromo')[0];if(n.noSnippet)i.addClass(this._root,'nosnippet');h.listen(this._root,'click','tag:a',function(ca){this.invoke('select',ca.getNode('tag:a'));}.bind(this));h.listen(this._control,'focus',null,this.onFocus.bind(this));p.listen('m-typeahead-logger:new-session-id',null,function(ca){if(!this._typeaheadSessionID)this._typeaheadSessionID=ca.__auto__data.sessionID;}.bind(this));h.listen(this._control,'blur',null,this.stopWatchLocation);}x.prototype.hide=function(){'use strict';if(this.getPermanent())return;q.prototype.hide.call(this);};x.prototype.setDatasource=function(y){'use strict';q.prototype.setDatasource.call(this,y);y.listen('complete',this.complete.bind(this));this.listen('show',this.resultsShown.bind(this));};x.prototype.submit=function(){'use strict';if(this.getValue()!==''){q.prototype.submit.call(this);if(n.enableSeeMore){var y=new o('/search/').setQueryData({query:this.getValue(),tsid:this._typeaheadSessionID}).toString();j.forceLoad(y);}this._control.blur();}};x.prototype.waitForResults=function(){'use strict';if(window.FW_ENABLED){this._root.appendChild(this.loadingIndicator);}else this._root.insertBefore(this.loadingIndicator,this._root.lastChild);h.show(this.loadingIndicator);};x.prototype.complete=function(){'use strict';if(window.FW_ENABLED&&this._display.length===0)this._root.appendChild(h.create('div',{className:'noResults'},u._("\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432")));if(window.FW_ENABLED&&this.uberbarQRPromo){this._root.appendChild(this.uberbarQRPromo);h.show(this.uberbarQRPromo);}h.hide(this.loadingIndicator);};x.prototype.hideRecentHeader=function(){'use strict';this.recentHeader&&h.hide(this.recentHeader);};x.prototype.showRecentHeader=function(){'use strict';this.recentHeader&&h.show(this.recentHeader);};x.prototype.hidePYMKHeader=function(){'use strict';this.PYMKHeader&&h.hide(this.PYMKHeader);};x.prototype.showPYMKHeader=function(){'use strict';this.PYMKHeader&&h.show(this.PYMKHeader);};x.prototype.resultsShown=function(y){'use strict';var z=y.show;if(this.getValue().length!==0){this.hideRecentHeader();this.hidePYMKHeader();if(!window.FW_ENABLED)if(n.enableSeeMore)this._seeMore.setQuery(this.getValue()).injectInto(z).show();z.push(this.loadingIndicator);h.show(this.loadingIndicator);}else{var aa=this.adjustHeaders(z);if(aa>0)i.addClass(z[aa-1],"jx-result-no-border");}if(this.showPresence)this.showPresenceIcons(z);return true;};x.prototype.adjustHeaders=function(y){'use strict';var z=-1;for(var aa=0;aa<y.length;aa++){var ba=h.find(y[aa],'a'),ca=JSON.parse(ba.getAttribute('data-extra'));if(ca.isPYMK){z=aa;break;}}if(z>-1){y.splice(z,0,this.PYMKHeader);this.showPYMKHeader();}else this.hidePYMKHeader();if(z===0){this.hideRecentHeader();}else this.showRecentHeader();if(this.PYMKHeader)i.conditionClass(this.PYMKHeader,"mSearchTypeaheadHeaderWithBorder",z>0);return z;};x.prototype.showPresenceIcons=function(y){'use strict';var z=[];for(var aa=0;aa<y.length;++aa)if(y[aa].rel)z.push(y[aa].rel);var ba=new l(new o('/chat/presence_icon.php').toString());ba.setData({ids:z});ba.listen('done',function(ca){if(!ca||ca.length===0)return;var da=h.scry(this._root,'a','typeahead-result');for(var ea=0;ea<da.length;++ea)if(ca[da[ea].rel]===1){var fa=h.find(da[ea],'i','presence');h.show(fa);}}.bind(this));ba.send();};x.prototype.addLocationAwareSource=function(y){'use strict';p.listen('location-update',null,function(event){y.setAuxiliaryData(Object.assign(y.getAuxiliaryData()||{},{json_location:k.getCurrentJSONLocation()}));});};x.prototype.onFocus=function(){'use strict';this.refresh();this.startWatchLocation();};x.prototype.startWatchLocation=function(){'use strict';if(k.shouldUseFWGeolocation())k.monitorLocation();};x.prototype.stopWatchLocation=function(event){'use strict';k.clearWatch();};r(x,{permanent:false});t(x,['select']);Object.assign(x.prototype,{icons:null,loadingIndicator:null,uberbarQRPromo:null,showPresence:false});f.exports=x;},null);
__d('MTypeaheadNativeSource',['MTypeaheadHelpers','Stratcom','TypeaheadInternationalNormalizer','TypeaheadPreloadedSource','createDeprecatedProperties','eventsMixinDeprecated','FWLoader'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=c('FWLoader').FW;n=babelHelpers.inherits(q,k);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);this.setNormalizer(j.normalize);}q.prototype.didStart=function(){'use strict';var r=this;i.listen('fw-bootstrapped-results-ready',null,function(s){r.invoke('rawresultsready',s.getData().friends);r.ondata(s.getData().friends);});window.FW_ENABLED&&p.bootstrapUsers();};q.prototype.ondata=function(r){'use strict';for(var s=0;s<r.length;++s)r[s].idx=s;k.prototype.ondata.apply(this,arguments);};q.prototype.sortHits=function(r,s){'use strict';var t=function(u,v){var w=this._raw[u],x=isNaN(w.idx)?Number.MAX_VALUE:w.idx,y=this._raw[v],z=isNaN(y.idx)?Number.MAX_VALUE:y.idx;return x-z;}.bind(this);s.sort(t);};q.prototype.matchResults=function(r){'use strict';var s=this.normalize(r);k.prototype.matchResults.call(this,s);};q.prototype.createNode=function(r){'use strict';return h.createNode(r,this.getShowSecondaryAction());};m(q,['rawresultsready']);l(q,{transformer:function(r){return {name:r.text,uri:r.path,id:r.uid,photo:r.photo,display:r.display||r.text,action:r.action,paths:r.paths,permissions:r.permissions,bootstrap:r.bootstrap,nativethirdpartyappicon:r.nativethirdpartyappicon};},showSecondaryAction:true});f.exports=q;},null);
__d('MTypeaheadPackagedSource',['MTypeaheadHelpers','TypeaheadInternationalNormalizer','TypeaheadPreloadedSource','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,j);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this);this.packagedResults=o;this.setNormalizer(i.normalize);}n.prototype.didStart=function(){'use strict';this.ondata(this.packagedResults);};n.prototype.ondata=function(o){'use strict';for(var p=0;p<o.length;++p)o[p].idx=p;j.prototype.ondata.apply(this,arguments);};n.prototype.sortHits=function(o,p){'use strict';var q=function(r,s){var t=this._raw[r],u=isNaN(t.idx)?Number.MAX_VALUE:t.idx,v=this._raw[s],w=isNaN(v.idx)?Number.MAX_VALUE:v.idx;return u-w;}.bind(this);p.sort(q);};n.prototype.matchResults=function(o){'use strict';var p=this.normalize(o);j.prototype.matchResults.call(this,p);};n.prototype.createNode=function(o){'use strict';return h.createNode(o,this.getShowSecondaryAction());};k(n,{transformer:function(o){return {name:o.text,uri:o.path,id:o.uid,photo:o.photo,display:o.display||o.text,action:o.action,paths:o.paths,permissions:o.permissions,type:o.type,openinnewtab:o.openinnewtab,subtext:o.subtext,bootstrap:o.bootstrap,verified:o.verified,nativethirdpartyappicon:o.nativethirdpartyappicon};},packagedResults:null,showSecondaryAction:true});f.exports=n;},null);
__d('InitMSearchTypeahead',['$','DOM','MLegacyDataStore','MSearchTypeahead','MSearchTypeaheadLogger','MSearchTypeaheadPerfLogger','MTypeaheadNativeSource','MTypeaheadNullstateSource','MTypeaheadOnDemandSource','MTypeaheadPackagedSource','MTypeaheadTouchSource','Stratcom','TypeaheadCompositeSource','SearchMTouchGlobalOptions','FWLoader'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=c('FWLoader').FW,w,x,y,z=function(aa){if(w)return;w=true;x=h(aa.id);var ba=h(aa.textinput);if(ba.tagName.toLowerCase()!=='input')ba=i.find(ba,'input');y=new k(x,ba,{photoSize:aa.photoSize,reportProblemURI:aa.reportProblemURI});if(aa.mSideNavMarauderLogger)aa.mSideNavMarauderLogger.setupTypeaheadListener(y);var ca,da=[];if(aa.sources.packagedSource){ca=new q(aa.sources.packagedSource.packagedresults);ca.setShowSecondaryAction(aa.showSecondaryAction);da.push(ca);}if(aa.sources.nativeSource){ca=new n();ca.setShowSecondaryAction(aa.showSecondaryAction);da.push(ca);}if(aa.sources.bootstrapped){ca=new r(aa.sources.bootstrapped.src,aa.sources.bootstrapped.source_key);ca.setShowSecondaryAction(aa.showSecondaryAction);da.push(ca);}if(aa.sources.nullstate){ca=new o(aa.sources.nullstate.src);ca.setMaximumResultCount(aa.sources.nullstate.max_results);da.push(ca);}if(aa.sources.online){ca=new p(aa.sources.online.src);if(aa.sources.online.max_results)ca.setMaximumResultCount(aa.sources.online.max_results);ca.setEnableImmediateReturnOfCachedResults(aa.sources.online.enable_caching);if(u.enableQueryThrottle)ca.setThrottleSendRequest(u.queryThrottleTime);ca.setMaxResults(u.maxResults);ca.setEnableEagerSendRequest(u.enableEagerSendRequest);ca.setQueryDelay(u.queryWaitTime);ca.setShowSecondaryAction(aa.showSecondaryAction);da.push(ca);if(aa.sources.online.useLocation)y.addLocationAwareSource(ca);}var ea=new t(da);ea.disableEmptyMergeKey();y.setDatasource(ea);y.setPermanent(aa.permanent);if(aa.showPresence)y.showPresence=true;if(aa.typeaheadScubaInfo)new m(y,aa.typeaheadScubaInfo,aa.sources.online.enable_caching);var fa='/search/metrics.php',ga=new l(y,fa);s.listen('log-m-search-session-end',null,function(ha){ga.blur(ha.getData().reason);});j.get(x).typeahead=y;s.listen('m-search-typeahead-change',null,function(ha){if(ha.getData().query!=y.getValue()){y.setValue(ha.getData().query);y.refresh();}});i.listen(x,'click','typeahead-result',function(){ba.blur();});s.listen('m:search-typeahead:clear',null,function(ha){y.setValue('');y.refresh();});s.invoke('m:search-typeahead:ready');y.start();if(ba.value!=='')y.refresh();if(window.FW_ENABLED)v.ubersearchReady();};g.main=z;},null);