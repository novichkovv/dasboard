/*!CK:925147902!*//*1460467008,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["MoA9M"]); }

__d('HomeRHCAdsBasicRefresh',['AdsRefreshHandler','Arbiter','NavigationMessage','Run','SubscriptionsHandler','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i,j,k;function l(){if(h){h.cleanup();h=null;}if(i){i.release();i=null;}j=null;}function m(){var p=c('ge')(k);if(p&&j){p.appendChild(j);j=null;}}function n(p,q){j=q;h&&h.forceLoadIfEnoughTimePassed(0);}var o={init:function(p,q,r){k=p;h=new (c('AdsRefreshHandler'))(c('ge')(p),q,r).subscribeDefaultEventsForRefresh();i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,l),c('Arbiter').subscribe('ProfileQuestionAnswered',n),c('Arbiter').subscribe('AdsRefreshHandler/AdsLoaded',m));c('Run').onLeave(l);}};f.exports=o;},null);
__d('NewStoriesPillController',['csx','Bootloader','DOMQuery','ge'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={_isAtTop:false,_view:null,show:function(j){c('Bootloader').loadModules(["NewStoriesPillView"],function(k){this._view=k;k.renderInto(c('DOMQuery').scry(c('ge')('contentArea'),"._2c44")[0],this._isAtTop);k.hideWhenScrollAbove(j);}.bind(this));},hide:function(){this._isAtTop=false;if(this._view)this._view.unmount();},setAtTop:function(){this._isAtTop=true;if(this._view)this._view.setAtTop();}};f.exports=i;},null);
__d("XFeedSeeFirstStoryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/control\/see_first\/story\/",{});},null);
__d('SeeFirstStoryLogger',['AsyncRequest','XFeedSeeFirstStoryController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function(){var i=c('XFeedSeeFirstStoryController').getURIBuilder().getURI();new (c('AsyncRequest'))(i).send();};f.exports={log:h};},null);
__d('TickerRightColumnController',['Arbiter','CSS','DOM','Event','NavigationMessage','Run','Style','SubscriptionsHandler','TickerController','Vector','ge','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;function i(){var n=c('ge')('pagelet_rhc_ticker');n&&c('TickerController').show(n,k);}function j(){var n=c('ge')('pagelet_rhc_ticker');n&&c('TickerController').hide(n);}function k(){var n=c('ge')('pagelet_rhc_ticker'),o=c('DOM').scry(n,'.ticker_container')[0],p=c('DOM').scry(n,'.ticker_stream')[0],q=c('ge')('rightCol');if(!n||!o||!p||!q)return;c('Style').set(o,'height','0');var r=75,s=c('Vector').getViewportDimensions().y,t=c('Vector').getElementDimensions(q).y,u=s-t-r,v=c('Vector').getElementDimensions(p).y,w=Math.max(Math.min(u,v,h.tickerMaxHeight||425),h.tickerMinHeight||225);c('Style').set(o,'height',w+'px');}function l(n){var o=c('ge')('pagelet_reminders'),p=c('ge')('pagelet_rhc_ticker'),q=o&&c('DOM').scry(o,'div.tickerToggleWrapper')[0],r=p&&c('DOM').scry(p,'div.tickerToggleWrapper')[0];q&&c('CSS').conditionClass(q,'displayedTickerToggleWrapper',!n);r&&c('CSS').conditionClass(r,'displayedTickerToggleWrapper',n);p&&c('CSS').conditionClass(p,'hidden_rhc_ticker',!n);if(n){k();var s=c('ge')('fbTickerClosedEd');s&&c('CSS').hide(s);}}var m={init:function(n){h=n;var o=new (c('SubscriptionsHandler'))();if(h.enableSidebar)o.addSubscriptions(c('Arbiter').subscribe('sidebar/visibility',function(q,r){if(r){j();}else i();}),c('Arbiter').subscribe('minisidebar/show',i),c('Arbiter').subscribe('LitestandClassicRHC/loaded',k),c('Event').listen(window,'scroll',c('throttle')(function(){var q=c('DOM').scry(c('ge')('pagelet_rhc_ticker'),'.fbFeedTicker')[0],r=c('TickerController').getInstance(q);r&&r.handleRemoveStory();})));if(!c('CSS').hasClass(document.documentElement,'sidebarMode')){i();}else if(h.enableSidebar)j();var p=function(){o.release();};c('Arbiter').subscribeOnce(c('NavigationMessage').NAVIGATION_BEGIN,p);c('Run').onLeave(p);},initRHCTickerHider:function(n){c('Event').listen(n,'click',this.hideRHCTicker);},showRHCTicker:function(){l(true);},hideRHCTicker:function(){l(false);}};f.exports=m;},null);
__d('LitestandColumnManager',['Arbiter','BlueBar','Event','NavigationMessage','Run','SubscriptionsHandler','clamp','ge','getScrollPosition'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=0,i=null;function j(){if(i)return;i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,function(){m(0);k();}),c('Arbiter').subscribe('ufi/didUpdate',function(p,q){if(q.offsetY)o.adjustVerticalWindowPosition(c('getScrollPosition')(window),q.offsetY);}),c('Event').listen(window,'resize',function(){if(!c('BlueBar').hasFixedBlueBar()){m(0);k();}}),c('Event').listen(window,'scroll',function(){if(!l())k();}));c('Run').onLeave(function(){return i&&i.release();});}function k(){i.release();i=null;}function l(){if(h<=0)return false;m(c('clamp')(c('getScrollPosition')(window).y,0,h));return h>0;}function m(p){if(p===h)return;n('leftCol',p);n('rightCol',p);h=p;}function n(p,q){var r=c('ge')(p);if(r)r.style.marginTop=q?q+'px':'';}var o={adjustVerticalWindowPosition:function(p,q){j();m(q);window.scrollTo(p.x,p.y+h);}};f.exports=o;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(s,t,u){if(t&&k[t])return;if(!j){c('Arbiter').subscribe('page_transition',r);j=true;}if(!i){s();return;}t&&(k[t]=1);l.push(s);if(!u){if(n){c('Run').onLeave(r);n=false;}m.push(l.length-1);}}var i,j,k={},l=[],m=[],n=true,o=500,p=c('debounceAcrossTransitions')(function(){i=false;var s=l;l=[];m=[];k={};for(var t=0,u=s.length;t<u;++t)s[t]();},o);function q(){i=true;p();}function r(){var s=m;m=[];n=true;for(var t=0,u=s.length;t<u;++t)l[s[t]]=c('emptyFunction');}c('Event').listen(window,'scroll',q);f.exports=h;},null);
__d('LitestandOffscreenController',['csx','cx','Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','getFullScreenElement','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=1,k=9,l=10,m={},n=false,o,p,q,r,s=[];function t(){o&&o.release();o=null;n=false;}function u(){m={};s=[];}function v(){if(c('CSS').matchesSelector(document.body,"._5vb_"))return l;return k;}function w(){r=r||c('Vector').getViewportDimensions().y;p=c('Vector').getScrollPosition().y;q=p+r;if(j){p-=r*j;q+=r*j;}for(var ea in m){var fa=m[ea];fa.position=c('Vector').getElementPosition(fa.element).y;if(!fa.hidden)fa.height=fa.element.offsetHeight;}}function x(){var ea=[],fa=c('getFullScreenElement')();for(var ga in m){var ha=m[ga],ia=ha.position,ja=ia+ha.height<p,ka=ia>q;if(!fa&&!ha.hidden&&(ja||ka)){y(ha);}else if(!ja&&!ka){ha.pendingHide=false;if(ha.hidden){if(ha.dirty&&ia<p){ea.push(ga);c('CSS').addClass(z(ha),"_49nu");}else c('Style').apply(ha.element,{height:'',marginBottom:''});c('CSS').show(z(ha));ha.dirty=false;ha.hidden=false;}}}if(!ea.length)return;var la=0;c('queryThenMutateDOM')(function(){for(var ma=0,na=ea.length;ma<na;ma++){var oa=m[ea[ma]];la+=oa.height-z(oa).offsetHeight+c('Style').getFloat(oa.element,'marginBottom');}},function(){for(var ma=0,na=ea.length;ma<na;ma++){var oa=m[ea[ma]];c('CSS').removeClass(z(oa),"_49nu");c('Style').apply(oa.element,{height:'',marginBottom:''});}la&&c('Scroll').setTop(document.body,c('Scroll').getTop(document.body)-la);});}function y(ea){if(!ea.pendingHide){s.push(ea);ea.pendingHide=true;}}function z(ea){if(ea.wrapperElement)return ea.wrapperElement;var fa=ea.element;if(fa.firstElementChild)return ea.wrapperElement=fa.firstElementChild;for(var ga=0;ga<fa.childNodes.length;ga++)if(fa.childNodes[ga].tagName)return ea.wrapperElement=fa.childNodes[ga];}function aa(){var ea=v()+'px';for(var fa=0;fa<s.length;fa++){var ga=s[fa];if(c('DOMQuery').scry(ga.element,"._52fb").length)ga.pendingHide=false;if(ga&&ga.element&&ga.pendingHide&&!ga.hidden){c('Style').apply(ga.element,{height:ga.height+'px',marginBottom:ea});c('CSS').hide(z(ga));ga.hidden=true;ga.pendingHide=false;}}s=[];}function ba(){c('runAfterScrollingStops')(aa,'LitestandOffscreenController/hide');c('queryThenMutateDOM')(w,x,'LitestandOffscreenController');}function ca(){c('Run').onLeave(t);o=new (c('SubscriptionsHandler'))();o.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,u),c('Event').listen(window,'scroll',c('throttle')(ba)),c('Event').listen(window,'resize',c('throttle')(function(){r=null;ba();})));n=true;}var da={attachSubstream:function(ea){n||ca();m[c('getOrCreateDOMID')(ea)]={element:ea};}};f.exports=da;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','BlueBar','LitestandColumnManager','LitestandMessages','LitestandStream','Style','$','getScrollPosition','queryThenMutateDOM','requestAnimationFrame','setImmediate'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=50,i=600,j=500,k,l,m;function n(){m&&clearTimeout(m);m=null;}function o(){m=setTimeout(function(){m=null;p();},j);}function p(){var v;c('queryThenMutateDOM')(function(){v=c('LitestandStream').canInsertNewerStories();},function(){if(v){s();}else o();},'LitestandNewStoryController/tryShowingStories');}function q(v){var w=new (c('Animation'))(v).from('opacity',0).to('opacity',1).duration(i);w.go();setTimeout(function(){w.stop();c('Style').set(v,'opacity',1);},i+200);}function r(v){n();if(!l)return;var w=l.nextSibling;if(v&&w)var x=w.offsetTop;c('Style').apply(l,{height:'',left:'',overflow:'',position:'',width:''});if(v){var y=w.offsetTop+h,z=y-x,aa=c('getScrollPosition')(window);c('LitestandColumnManager').adjustVerticalWindowPosition(aa,z);c('requestAnimationFrame')(function(){c('LitestandColumnManager').adjustVerticalWindowPosition(aa,z);q(l);if(k){k.setAtTop();k.show(z);}});}else q(l);c('Arbiter').inform(c('LitestandMessages').STORIES_INSERTED);c('Arbiter').inform(c('LitestandMessages').NEWER_STORIES_INSERTED);c('setImmediate')(function(){return c('Arbiter').inform('reflow');});new (c('AsyncRequest'))().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:c('LitestandStream').getSectionID()}).send();}function s(){r(c('BlueBar').hasFixedBlueBar());}function t(){r(false);}var u={waitForDisplay:function(v){if(!l)l=c('$')(v);if(c('LitestandStream').canInsertNewerStories()){s();}else o();},showStoriesNow:function(v){l=v;t();},setNewStoryPill:function(v){k=v;}};f.exports=u;},null);
__d('FeedErrorDetection',['csx','Banzai','CSS','DOM','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0,j={},k=false,l=false;function m(event,r,s,t){var u={event:event,shouldLogDetail:r,site:'www'};if(r){u.intValues=s;u.normalValues=t;}c('Banzai').post('feed_error_detection',u,{delay:0});}var n=function(r,s,t,u){var v=c('DOM').scry(r,s||"._5jmm").filter(t),w={};for(var x=0;x<v.length;x++){var y=v[x],z=y.getAttribute('data-dedupekey');if(w[z]){u(y);}else w[z]=1;}},o=function(r){return !!r.getAttribute('data-dedupekey');},p=function(r){return o(r)&&c('CSS').shown(r);},q={dedupe:function(r,s){n(r,s,o,function(t){return c('DOM').remove(t);});},dedupeHide:function(r,s){n(r,s,p,function(t){c('CSS').hide(t);t.removeAttribute('style');});},registerFeedStories:function(r,s){if(r=='substream_0'){i=0;j={};k=false;l=false;}var t=c('DOM').scry(c('ge')(r),"._5jmm"),u=t.length;if(!u&&!k){if(!l){l=true;return;}if(!i){m('empty_feed_js',s,{},{});}else m('end_of_feed_js',s,s?{stories_count:i}:{},{});k=true;return;}l=false;for(var v=0;v<u;v++){var w=t[v],x=w.getAttribute('data-dedupekey'),y=w.getAttribute('data-ft');if(!x||!y)continue;if(x in j){var z={};if(s)z={dedupKey:x,ft_A:y,ft_B:j[x]};m('duplicate_stories',s,{},{dup_field:z});}else{j[x]=y;i++;}}}};f.exports=q;},null);
__d('LitestandStreamLoader',['$','Arbiter','Bootloader','CSS','DOM','FeedErrorDetection','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','NavigationMessage','OnVisible','Run','UserActivity','ge','getElementPosition','getOrCreateDOMID','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0,i=false,j={},k,l,m,n,o,p,q=0,r,s,t=[],u=0,v,w;function x(){c('Run').onLeave(y);h=0;t=[c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,y),c('Arbiter').subscribe(c('LitestandMessages').NEWER_STORIES_INSERTED,function(){w=null;})];t.push(c('Arbiter').subscribe('layer_shown',function(oa,pa){if(pa&&pa.type==='DialogX')h++;}),c('Arbiter').subscribe('layer_hidden',function(oa,pa){if(pa&&pa.type==='DialogX')h--;}));c('LitestandStoryInsertionStatus').registerBlocker(function(){return h>0;});i=true;}function y(){c('Arbiter').inform(c('LitestandMessages').LEAVE_HOME);i=false;j={};s=null;q=0;t.forEach(c('Arbiter').unsubscribe);t=[];k&&k.remove();o&&clearTimeout(o);o=null;n=null;w=null;r&&r.remove();r=null;u=0;}function z(oa){o&&clearTimeout(o);o=setTimeout(function(){o=null;fa();},oa);}function aa(){if(s&&n&&s.pollIntervalMS&&s.pollIntervalMS>1000){c('UserActivity').setIdleTime(s.newStoryIdleTime);z(s.pollIntervalMS);}}function ba(){k=new (c('OnVisible'))(c('DOM').find(l,'a'),ma.bind(null),false,s?s.bufferPixels:1000);}function ca(){var oa=c('getUnboundedScrollPosition')(window).y;return oa>s.firstPagerScrollBuffer;}function da(){if(ca()){ba();r&&r.remove();r=null;}}function ea(oa){var pa=c('DOM').find(l,'a');c('Event').listen(pa,'click',function(event){ma();r&&r.remove();r=null;event.preventDefault();});var qa=c('getElementPosition')(l),ra=c('getViewportDimensions')();if(oa&&qa.y<ra.height){ma();}else if(oa&&!ca()){r=c('Event').listen(window,'scroll',c('throttle')(da));}else ba();}function fa(){if(!n)return;if(!c('UserActivity').isActive(s.newStoryIdleTime)){c('UserActivity').subscribeOnce(fa);return;}if(c('UserActivity').hasBeenInactive()){c('UserActivity').resetActiveStatus();var oa=s.pollIntervalMS,pa=Date.now()-c('UserActivity').getLastInActiveEnds();if(pa<oa){z(oa-pa);return;}}if(!c('LitestandStream').canInsertNewerStories()){z(s.pollIntervalMS);return;}ga();}function ga(){if(!n)return;o&&clearTimeout(o);if(!w){var oa=c('LitestandStream').getStreamRoot();w=c('JSXDOM').div({style:{height:0,width:oa.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});c('DOM').prependContent(oa,w);c('Arbiter').inform(c('LitestandMessages').NEW_STORIES_CONTAINER_CREATED,w);}var pa=c('JSXDOM').div(null);c('DOM').prependContent(w,pa);c('Bootloader').loadModules(["UIPagelet"],function(qa){qa.loadFromEndpoint('LitestandNewerStoriesPagelet',pa,Object.assign(n,{cursor:v,containerID:c('getOrCreateDOMID')(w)}),{crossPage:true});});}function ha(){var oa=c('getOrCreateDOMID')(l);c('CSS').addClass(l,'async_saving');var pa=ka(),qa=pa.cursor,ra=pa.storiesCount;if(j[qa])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+qa);j[qa]=qa;var sa={cursor:qa,pager_config:m,pager_id:oa,scroll_count:++q,feed_stream_id:c('LitestandStream').getFeedStreamID(),story_id:c('LitestandStream').getStoryID(),client_stories_count:ra};c('Bootloader').loadModules(["UIPagelet"],function(ta){ta.loadFromEndpoint(s.pagerController,c('getOrCreateDOMID')(p),sa,{append:true,automatic:true,usePipe:true,crossPage:s.crossPage,errorHandler:ia,transportErrorHandler:ia});c('Arbiter').inform(c('LitestandMessages').STORIES_REQUESTED);});}function ia(oa){var pa=ka();delete j[pa.cursor];c('CSS').removeClass(l,'async_saving');}function ja(){var oa=la();if(oa.length){return oa[0].getAttribute('data-cursor');}else return l&&l.getAttribute('data-cursor');}function ka(){var oa=la(),pa={},qa=s&&s.noDOMCursors;pa.storiesCount=oa.length;if(!oa.length)oa.length=0;if(oa.length&&!qa){pa.cursor=oa[oa.length-1].getAttribute('data-cursor');}else pa.cursor=l&&l.getAttribute('data-cursor');return pa;}function la(){var oa=c('DOM').scry(p,c('LitestandStream').getStoriesSelector());return oa.filter(function(pa){return pa.getAttribute('data-cursor');});}function ma(){if(i){ha();k&&k.remove();k=null;}}var na={register:function(oa,pa,qa,ra){i||x();s=babelHelpers['extends']({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},pa);m=qa;p=c('$')(oa);v=ja();l=ra;ea(true);aa();},removeOldPager:function(oa,pa){if(oa)c('DOM').remove(c('$')(oa));c('CSS').show(c('$')(pa));},removeLoadingIndicator:function(oa,pa){var qa=c('ge')(oa);if(qa)c('DOM').remove(qa);c('CSS').show(pa);},moreStoriesInserted:function(oa){c('Arbiter').inform(c('LitestandMessages').STORIES_INSERTED,{substream_id:oa});var pa=c('$')(oa);c('LitestandOffscreenController').attachSubstream(pa);},attachNewPager:function(oa){c('FeedErrorDetection').dedupeHide(c('LitestandStream').getStreamRoot(),c('LitestandStream').getStoriesSelector());l=oa;l&&ea(false);},setPollerData:function(oa){if(oa){n=oa;aa();}},headLoadCompleted:function(oa){v=oa.newCursor;aa();var pa=oa.stories;if(pa&&pa.length>0){for(var qa=pa.length-1;qa>=0;qa--)pa[qa].setAttribute('data-insertion-position',--u);c('FeedErrorDetection').dedupe(c('LitestandStream').getStreamRoot(),c('LitestandStream').getStoriesSelector());c('Arbiter').inform('Stream/totalHeadLoadedStories',{count:-u});}},forceNewFetch:ga};f.exports=na;},null);
__d('PhotosUploadWaterfallMixin',['PhotosUploadWaterfall','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('emptyFunction'),i={getUploaderApp:h,getWaterfallID:h,getAdditionalData:function(){return {};},logWaterfallStep:function(j,k,l){c('PhotosUploadWaterfall').sendSignal(babelHelpers['extends']({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:j,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),k),l);},logWaterfallStepUsingBanzai:function(j,k,l){c('PhotosUploadWaterfall').sendBanzai(babelHelpers['extends']({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:j,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),k),l);}};f.exports=i;},null);
__d('PhotoSourceTypes',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null});},null);
__d('BaseSelectionContainer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0;function i(){'use strict';this.$BaseSelectionContainer1=(h++).toString();}i.prototype.getSelectionContainerID=function(){'use strict';return this.$BaseSelectionContainer1;};i.prototype.getSource=function(){'use strict';throw 'This must be implemented by the child class';};i.prototype.getName=function(){'use strict';return null;};i.prototype.getSize=function(){'use strict';return null;};i.prototype.hasPlaceholderUI=function(){'use strict';throw 'This must be implemented by the child class';};f.exports=i;},null);
__d('SelectionSource',['PhotoSourceTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',POSTED_PHOTOS:'posted_photos',PAGES_POSTED_PHOTOS:'pages_posted_photos',toPhotoSourceType:function(i){switch(i){case h.FILE:case h.FLASH:return c('PhotoSourceTypes').COMPUTER;case h.VAULT:return c('PhotoSourceTypes').SYNCED_PHOTOS;case h.SUGGESTIONS:return c('PhotoSourceTypes').SUGGESTIONS;case h.POSTED_PHOTOS:return c('PhotoSourceTypes').POSTED_PHOTOS;case h.PAGES_POSTED_PHOTOS:return c('PhotoSourceTypes').PAGES_POSTED_PHOTOS;default:throw 'No mapping for SelectionSource: '+i;}}};f.exports=h;},null);
__d('FileSelectionContainer',['BaseSelectionContainer','SelectionSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('BaseSelectionContainer'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$FileSelectionContainer1=k;}j.prototype.getFile=function(){'use strict';return this.$FileSelectionContainer1;};j.prototype.getSource=function(){'use strict';return c('SelectionSource').FILE;};j.prototype.getName=function(){'use strict';return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name;};j.prototype.getSize=function(){'use strict';return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size;};j.prototype.hasPlaceholderUI=function(){'use strict';return false;};f.exports=j;},null);
__d('FilePickerEvent',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d('HTML5FilePicker',['cx','ArbiterMixin','BrowserSupport','CSS','DOM','FilePickerEvent','FileSelectionContainer','Parent','PhotosUploadID','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosUploadWaterfallXMixin','PUWApplications','PUWSteps','URI','getOrCreateDOMID'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){this._config=babelHelpers['extends']({accept:undefined,multiple:undefined},k);this._button=j;this._beginInformed=false;if(!c('BrowserSupport').hasFileAPI()){this.logStep(c('PUWSteps').CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}return;}this._subscriptions=[];var l=this._config.input||c('DOM').create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))l.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))l.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))l.title=this._config.title;var m=c('DOM').create('label',{className:'accessible_elem','for':c('getOrCreateDOMID')(l)},l.title),n=c('DOM').create('div',{className:"_3jk"},[m,l]);c('CSS').addClass(this._button,"_m");c('DOM').appendContent(this._button,n);this._button.setAttribute('rel','ignore');this._bindInput(l);var o=c('Parent').byClass(this._button,'addPhotosDisabled');if(o){c('CSS').removeClass(o,'addPhotosDisabled');c('CSS').addClass(o,'addPhotosEnabled');}}Object.assign(i.prototype,c('ArbiterMixin'),c('PhotosUploadWaterfallMixin'),c('PhotosUploadWaterfallXMixin'),{getUploaderApp:function(){return c('PhotosUploadWaterfall').APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return c('PUWApplications').WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},getSwfID:function(){return null;},_constructFileList:function(){var j=Array.from(this._input.files);j.forEach(function(k){k.uploadID=c('PhotosUploadID').getNewID();});return j;},_constructFileSelectionContainerList:function(){var j=Array.from(this._input.files);return j.map(function(k){return new (c('FileSelectionContainer'))(k);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(j){this.cleanup();j.onclick=function(){this.logWaterfallStep(c('PhotosUploadWaterfall').SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(c('FilePickerEvent').BEGIN||'FilePickerEvent/BEGIN');}this.inform(c('FilePickerEvent').SELECT_START);}.bind(this);j.onchange=function(){this.inform(c('FilePickerEvent').SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}.bind(this);if(this._input)c('DOM').replace(this._input,j);this._input=j;}});f.exports=i;},null);
__d('UploadSession',['AsyncRequest','FilePickerEvent','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){'use strict';this._sessionID=k;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}i.prototype.addFilePicker=function(k){'use strict';if(!c('arrayContains')(this._pickers,k)){this._pickers.push(k);if(this._controller&&k.getSwfID&&k.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(k.getSwfID());k.subscribe(c('FilePickerEvent').BEGIN,function(l,m){if(!this._beginLogged){this._beginLogged=true;k.logWaterfallStep(c('PhotosUploadWaterfall').BEGIN);k.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);}}.bind(this));k.subscribe(c('FilePickerEvent').SELECTED,function(l,m){k.logStep(c('PUWSteps').CLIENT_SELECT_SUCCESS,{volume:m.files.length});if(this._controller){this._controller.uploadFiles(m.files);}else this._pendingFileLists.push(m);if(this._asyncBootstrapped)return;var n=k._button,o=new (c('URI'))(n.getAttribute('ajaxify'));o.addQueryData('num_selected',m.files.length);c('AsyncRequest').bootstrap(o.toString(),n,true);this._asyncBootstrapped=true;}.bind(this));k.subscribe(c('FilePickerEvent').SELECT_START,function(){k.logStep(c('PUWSteps').CLIENT_SELECT_BEGIN);}.bind(this));k.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(){k.logStep(c('PUWSteps').CLIENT_SELECT_CANCEL);if(!this._overlay){k.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this));k.subscribe(c('FilePickerEvent').ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this));k.subscribe(c('FilePickerEvent').SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this));}};i.prototype.addController=function(k){'use strict';this._controller=k;this._asyncBootstrapped=true;var l=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,m=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;c('PhotosUploadWaterfall').sendSignal({qn:l,step:c('PhotosUploadWaterfall').BEGIN,uploader:m});}if(this._pendingFileLists.length){var n=[];this._pendingFileLists.forEach(function(o){n=n.concat(o.files);});this._controller.uploadFiles(n);}else c('PhotosUploadWaterfall').sendSignal({qn:l,step:c('PhotosUploadWaterfall').OVERLAY_FIRST,uploader:m});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};i.prototype.addOverlay=function(k){'use strict';this._overlay=k;};i.prototype.addOverlayAndController=function(k,l){'use strict';this.addOverlay(k);this.addController(l);};i.addFilePickerToSession=function(k,l){'use strict';j(k).addFilePicker(l);};i.addControllerToSession=function(k,l){'use strict';j(k).addController(l);};i.addOverlayToSession=function(k,l){'use strict';j(k).addOverlay(l);};i.addOverlayAndControllerToSession=function(k,l,m){'use strict';j(k).addOverlayAndController(l,m);};function j(k){if(!h[k])h[k]=new i(k);return h[k];}f.exports=i;},null);
__d('PubcontentFeedChainingControllerLoader',['Arbiter','Bootloader','PageLikeConstants','SubscriptionsHandler','UFIUIEvents','AttachmentRelatedShareConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[c('PageLikeConstants').LIKED,c('UFIUIEvents').ActionLinkLike,c('UFIUIEvents').ReactionButtonClicked,c('UFIUIEvents').Comment,c('UFIUIEvents').ActionAddComment,'composer/publish','LitestandComposer/publish',c('AttachmentRelatedShareConstants').ARTICLE_CLICK,c('AttachmentRelatedShareConstants').VIDEO_CLICK,c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,c('AttachmentRelatedShareConstants').GAME_CLICK,c('AttachmentRelatedShareConstants').PHOTO_CLICK,c('AttachmentRelatedShareConstants').EVENT_JOIN,c('AttachmentRelatedShareConstants').PRODUCT_CLICK],i=null,j=false,k=null,l={init:function(){if(k){k.init({isLazy:false});}else this._startListening();},_startListening:function(){if(i)return;i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(h,function(event,m){c('Arbiter').inform(event+'.lazy',m,c('Arbiter').BEHAVIOR_PERSISTENT);this._bootload();}.bind(this)));},_bootload:function(){if(j)return;j=true;c('Bootloader').loadModules(["PubcontentFeedChainingControllerX"],function(m){i&&i.release();k=m;k.init({isLazy:true});});}};f.exports=l;},null);
__d('ReactFeedComposerXBody',['DOM','Event','SubscriptionsHandler'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this.$ReactFeedComposerXBody2=i.root;this.$ReactFeedComposerXBody4=c('DOM').find(this.$ReactFeedComposerXBody2,'textarea');this.$ReactFeedComposerXBody1=c('DOM').find(this.$ReactFeedComposerXBody2,'input[type="hidden"]');this.$ReactFeedComposerXBody3=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerXBody3.addSubscriptions(c('Event').listen(this.$ReactFeedComposerXBody4,'change',this.$ReactFeedComposerXBody5.bind(this)));}h.prototype.$ReactFeedComposerXBody5=function(i){this.$ReactFeedComposerXBody1.value=i.target.value;};f.exports=h;},null);
__d('FeedAdsGapRuleViolationDetection',['csx','cx','Banzai','CSS','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='ei',k='qid',l='gap rule violation',m='non violating ads gap',n='first position violation',o='feed load',p='first position invalidation',q='spacing invalidation',r=[],s=[],t=[],u={},v={},w={registerFeedStories:function(x,y){if(x.containerID=='substream_0'){r=[];s=[];}var z=c('ge')(x.containerID);if(!z)return;u=babelHelpers['extends']({},x.demoAdChecks,u);var aa=c('DOM').scry(z,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ca){return ca!==null;});if(x.isLoggingEnabled&&aa.length!==0)this._logFeedLoad();if(x.isNewerStories){r=aa.concat(r);}else r=r.concat(aa);for(var ba in x.minGaps)if(x.minGaps.hasOwnProperty(ba))v[ba]=x.minGaps[ba];if(c('isEmpty')(u)){if(x.isLoggingEnabled)this._checkFirstPosViolation(x,z);if(x.isLoggingEnabled||x.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(x);}},_convertStoryNodeToObject:function(x){if(c('CSS').matchesSelector(x,"._170y"))return null;var y=x.getAttribute('data-dedupekey');if(u[y])return null;var z=c('DOM').scry(x,"div._hye"),aa=c('DOM').scry(x,"li._170x"),ba=[];if(z.length!==0){ba=z.map(function(ea){return ea.getAttribute('data-ft');}).filter(function(ea){return ea!==null;});}else if(aa.length!==0){ba=aa.map(function(ea){return ea.getAttribute('data-ft');}).filter(function(ea){return ea!==null;});}else if(x.getAttribute('data-ft'))ba=[x.getAttribute('data-ft')];if(!ba.length)return null;var ca=JSON.parse(ba[0]),da={dataFTArray:ba,dedupKey:y,isSponsored:!!ca[j],height:x.offsetHeight,qid:parseInt(ca[k],10),nodeID:x.id};return da;},_checkFirstPosViolation:function(x,y){while(r.length>0&&r[0].isSponsored){var z={ftArray:r[0].dataFTArray,qid:r[0].qid,nodeid:r[0].nodeID,firstStoryType:x.firstStoryType},aa=c('DOM').scry(y,'.uiBoxRed')[0];if(aa){var ba=aa.textContent||aa.innerText;if(ba)z.error_msg=ba;}if(x.isLoggingEnabled&&!(r[0].dedupKey in t)){this._logFirstPosViolation(z);t[r[0].dedupKey]=z;}break;}},_getMinGap:function(x,y,z){var aa=Math.min(x?x:Number.MAX_VALUE,y?y:Number.MAX_VALUE);return aa!==Number.MAX_VALUE?aa:z;},_getStoryDedupKeysJSONString:function(x,y){var z=[];for(var aa=x;aa<=y;aa++)z.push(r[aa].dedupKey);return JSON.stringify(z);},_getIdxOfStoryToSwap:function(x,y){if(y>=r.length-x)return -1;for(var z=x+1;z<r.length&&y>0;z++){if(!r[z].isSponsored){y--;}else return -1;if(y===0)return z;}return -1;},_checkGapRuleViolation:function(x){var y=null,z=null,aa=0;for(var ba=0;ba<r.length;ba++){var ca=r[ba];aa+=ca.height;if(ca.isSponsored){aa-=ca.height;var da=false,ea=false;if(y!==null){var fa=ba-y,ga=null,ha=this._getMinGap(v[z.dedupKey],v[ca.dedupKey],x.defaultMinGap);if(fa<ha){ga=l;}else ga=m;var ia={ftArray_A:z.dataFTArray,ftArray_B:ca.dataFTArray,dist:fa,pdist:aa,pos:ba+1,qid_A:z.qid,qid_B:ca.qid,event_type:ga,nodeid:ca.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(y,ba)};if(x.isLoggingEnabled)if(!(ca.dedupKey in s)||s[ca.dedupKey].event_type!==ga){this._logAdsGapEvent(ia);s[ca.dedupKey]=ia;}if(x.isGapRuleInvalidationEnabled&&ga==l){var ja=-1;if(x.isSwapOnGapRuleViolationEnabled)ja=this._getIdxOfStoryToSwap(ba,ha-fa);if(ja>0){this._shiftAdBelowOrganicStory(ca.nodeID,r[ja].nodeID);var ka=r[ba];r.splice(ba,1);r.splice(ja,0,ka);if(x.isLoggingEnabled){var la={ft:r[ja].dataFTArray[0],dist:ja-ba,qid:r[ja].qid,event_type:'ad_swap'};c('Banzai').post('feed_ads_gap_rule_violation',la);}ea=true;ca=r[ba];aa+=ca.height;}else if(x.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(ia);da=true;r.splice(ba--,1);}}}if(!da&&!ea){y=ba;z=ca;aa=0;}}}},_logFirstPosViolation:function(x){var y={ft:x.ftArray[0],event_type:n,intValues:{qid:x.qid},first_story_type:x.firstStoryType};if(x.error_msg)y.error_msg=x.error_msg;c('Banzai').post('feed_ads_gap_rule_violation',y);},_logAdsGapEvent:function(x){var y={ft_A:x.ftArray_A[0],ft_B:x.ftArray_B[0],event_type:x.event_type,intValues:{dist:x.dist,pdist:x.pdist,pos:x.pos,qid_A:x.qid_A,qid_B:x.qid_B},dedup_keys:x.dedupKeys};c('Banzai').post('feed_ads_gap_rule_violation',y);},_logFeedLoad:function(){var x={event_type:o};c('Banzai').post('feed_ads_gap_rule_violation',x);},_invalidateFirstPosAd:function(x){c('CSS').hide(c('ge')(x.nodeid));var y={ft_array:x.ftArray,event_type:p};c('Banzai').post('feed_ads_gap_rule_violation',y);},_invalidateGapRuleViolatedAd:function(x){var y=c('ge')(x.nodeid);y&&c('CSS').hide(y);var z={ft_array_A:x.ftArray_A,ft_array_B:x.ftArray_B,event_type:q};c('Banzai').post('feed_ads_gap_rule_violation',z);},_shiftAdBelowOrganicStory:function(x,y){var z=c('ge')(x),aa=c('ge')(y);z&&aa&&c('DOM').insertAfter(aa,z);}};f.exports=w;},null);
__d('StoryPositionTracking',['csx','DOM','LitestandStream','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0;function j(m,n){var o=JSON.parse(m.getAttribute('data-ft'));if(o){o.insertion_position=n;m.setAttribute('data-ft',JSON.stringify(o));}}function k(m){return c('DOM').scry(m,"._5jmm");}var l={registerNewStories:function(m){if(m=='substream_0')i=0;var n=k(c('ge')(m)),o=n.length;for(var p=0;p<o;p++)j(n[p],i++);},updateAllStories:function(){var m=k(c('LitestandStream').getStreamRoot()),n=m.length;i=0;for(var o=0;o<n;o++)j(m[o],i++);}};f.exports=l;},null);
__d('FbFeedAttachmentRelatedShare',['csx','Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={loadRelatedAttachment:function(j,k){c('tidyEvent')(c('Event').listen(j,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:j,global_share_id:k});}));},loadRelatedGameAttachment:function(j,k){c('tidyEvent')(c('Event').listen(j,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:j,global_share_id:k});}));},loadRelatedAttachmentForStream:function(j){var k=function(event,l){var m=event.getTarget();if(m.getAttribute('target')!=='_blank')return;var n="^div._5pbx",o="^div._5pc9",p=c('DOMQuery').scry(m,n)[0]||c('DOMQuery').scry(m,o)[0];if(!p)return;c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:0,link_url:m.getAttribute('href'),is_right_click:l});};c('tidyEvent')(c('Event').listen(j,'click',function(event){k(event,false);}));c('tidyEvent')(c('Event').listen(j,'mousedown',function(event){if(event.which==3||event.button==2)k(event,true);}));}};f.exports=i;},null);
__d('FbFeedViewportTracking',['csx','Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('StreamViewportTracking'));j=i&&i.prototype;k.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(c('Arbiter').subscribe([c('LitestandMessages').STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};k.prototype.getStorySelector=function(){'use strict';return "._5jmm";};k.prototype.getStream=function(){'use strict';return c('LitestandStream').getStreamRoot();};k.prototype.getSessionID=function(){'use strict';return c('LitestandStream').getFeedStreamID();};k.init=function(l){'use strict';k.instance=new k();k.instance.init(l);};k.getInstance=function(){'use strict';return k.instance;};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);