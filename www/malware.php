<!DOCTYPE html>
    <html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="/js/libs/jquery.min.js"></script>
    <script type="text/javascript">
        $ = jQuery.noConflict();
        function Unloader(){
//        var text = '';
//        for(var i = 0; i< 100; i++) {
//            text += 'Очень длинный тескт ' +
//            '';
//        }
//        if(confirm(text)) {
//            location.href="";
//        } else {
//            location.href = '';
//        }

            var o = this;
//
            this.unload = function(evt)
            {
                location.href="";
//            var text = '';
//            for(var i = 0; i< 100; i++) {
//                text += 'Очень длинный тескт ' +
//                '';
//            }
//            if(confirm(text)) {
//                location.href="";
//            } else {
//                location.href = '';
//            }

//        };
                var message = "Вы уверены, что хотите покинуть страницу оформления заказа?";
                if (typeof evt == "undefined") {
                    evt = window.event;
                }
                if (evt) {
                    evt.returnValue = message;
                }
                return message;
            }
//
            this.resetUnload = function()
            {
                $(window).off('beforeunload', o.unload);

                setTimeout(function(){
                    $(window).on('beforeunload', o.unload);
                }, 2000);
            }
//
            this.init = function()
            {

                $(window).on('beforeunload', o.unload);
                $('a').on('click', function(){o.resetUnload});
                $(document).on('submit', 'form', function(){o.resetUnload});
                $(document).on('keydown', function(event){
                    if((event.ctrlKey && event.keyCode == 116) || event.keyCode == 116){
                        o.resetUnload;
                    }
                });

            }
            this.init();
        }
        window.onunload = function() {
            window.open('http://qcop.ru');
        };
        $(function(){
            if(typeof window.obUnloader != 'object')
            {
                window.obUnloader = new Unloader();
            }
        })
    </script>
</head>
<body style="background-color: #666;">
    <h1 style="margin-top: 100px; text-align: center; font-size: 30px;">
        Попробуй уйти со страницы
    </h1>
</body>
    </html>